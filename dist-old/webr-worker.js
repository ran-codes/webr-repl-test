"use strict";var go=Object.create;var qs=Object.defineProperty;var _o=Object.getOwnPropertyDescriptor;var yo=Object.getOwnPropertyNames;var wo=Object.getPrototypeOf,bo=Object.prototype.hasOwnProperty;var Hs=e=>{throw TypeError(e)};var Z=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ro=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of yo(r))!bo.call(e,s)&&s!==t&&qs(e,s,{get:()=>r[s],enumerable:!(n=_o(r,s))||n.enumerable});return e};var ut=(e,r,t)=>(t=e!=null?go(wo(e)):{},Ro(r||!e||!e.__esModule?qs(t,"default",{value:e,enumerable:!0}):t,e));var Pn=(e,r,t)=>r.has(e)||Hs("Cannot "+t);var E=(e,r,t)=>(Pn(e,r,"read from private field"),t?t.call(e):r.get(e)),I=(e,r,t)=>r.has(e)?Hs("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),F=(e,r,t,n)=>(Pn(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),ke=(e,r,t)=>(Pn(e,r,"access private method"),t);var $s=(e,r,t,n)=>({set _(s){F(e,r,s,t)},get _(){return E(e,r,n)}});var Vt=Z(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.getUint64=ae.getInt64=ae.setInt64=ae.setUint64=ae.UINT32_MAX=void 0;ae.UINT32_MAX=4294967295;function To(e,r,t){let n=t/4294967296,s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ae.setUint64=To;function ko(e,r,t){let n=Math.floor(t/4294967296),s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ae.setInt64=ko;function Ao(e,r){let t=e.getInt32(r),n=e.getUint32(r+4);return t*4294967296+n}ae.getInt64=Ao;function Do(e,r){let t=e.getUint32(r),n=e.getUint32(r+4);return t*4294967296+n}ae.getUint64=Do});var Vr=Z(X=>{"use strict";var Cn,Fn,Wn;Object.defineProperty(X,"__esModule",{value:!0});X.utf8DecodeTD=X.TEXT_DECODER_THRESHOLD=X.utf8DecodeJs=X.utf8EncodeTE=X.TEXT_ENCODER_THRESHOLD=X.utf8EncodeJs=X.utf8Count=void 0;var ta=Vt(),Zr=(typeof process>"u"||((Cn=process==null?void 0:process.env)===null||Cn===void 0?void 0:Cn.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Po(e){let r=e.length,t=0,n=0;for(;n<r;){let s=e.charCodeAt(n++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&n<r){let a=e.charCodeAt(n);(a&64512)===56320&&(++n,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}X.utf8Count=Po;function Oo(e,r,t){let n=e.length,s=t,a=0;for(;a<n;){let i=e.charCodeAt(a++);if((i&4294967168)===0){r[s++]=i;continue}else if((i&4294965248)===0)r[s++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&a<n){let o=e.charCodeAt(a);(o&64512)===56320&&(++a,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?(r[s++]=i>>12&15|224,r[s++]=i>>6&63|128):(r[s++]=i>>18&7|240,r[s++]=i>>12&63|128,r[s++]=i>>6&63|128)}r[s++]=i&63|128}}X.utf8EncodeJs=Oo;var Jt=Zr?new TextEncoder:void 0;X.TEXT_ENCODER_THRESHOLD=Zr?typeof process<"u"&&((Fn=process==null?void 0:process.env)===null||Fn===void 0?void 0:Fn.TEXT_ENCODING)!=="force"?200:0:ta.UINT32_MAX;function Mo(e,r,t){r.set(Jt.encode(e),t)}function Io(e,r,t){Jt.encodeInto(e,r.subarray(t))}X.utf8EncodeTE=Jt!=null&&Jt.encodeInto?Io:Mo;var Uo=4096;function No(e,r,t){let n=r,s=n+t,a=[],i="";for(;n<s;){let o=e[n++];if((o&128)===0)a.push(o);else if((o&224)===192){let d=e[n++]&63;a.push((o&31)<<6|d)}else if((o&240)===224){let d=e[n++]&63,l=e[n++]&63;a.push((o&31)<<12|d<<6|l)}else if((o&248)===240){let d=e[n++]&63,l=e[n++]&63,u=e[n++]&63,w=(o&7)<<18|d<<12|l<<6|u;w>65535&&(w-=65536,a.push(w>>>10&1023|55296),w=56320|w&1023),a.push(w)}else a.push(o);a.length>=Uo&&(i+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(i+=String.fromCharCode(...a)),i}X.utf8DecodeJs=No;var Co=Zr?new TextDecoder:null;X.TEXT_DECODER_THRESHOLD=Zr?typeof process<"u"&&((Wn=process==null?void 0:process.env)===null||Wn===void 0?void 0:Wn.TEXT_DECODER)!=="force"?200:0:ta.UINT32_MAX;function Fo(e,r,t){let n=e.subarray(r,r+t);return Co.decode(n)}X.utf8DecodeTD=Fo});var Bn=Z(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ExtData=void 0;var Ln=class{constructor(r,t){this.type=r,this.data=t}};Jr.ExtData=Ln});var Gr=Z(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.DecodeError=void 0;var zn=class e extends Error{constructor(r){super(r);let t=Object.create(e.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:e.name})}};Xr.DecodeError=zn});var jn=Z(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.timestampExtension=V.decodeTimestampExtension=V.decodeTimestampToTimeSpec=V.encodeTimestampExtension=V.encodeDateToTimeSpec=V.encodeTimeSpecToTimestamp=V.EXT_TIMESTAMP=void 0;var Wo=Gr(),ra=Vt();V.EXT_TIMESTAMP=-1;var Lo=4294967296-1,Bo=17179869184-1;function na({sec:e,nsec:r}){if(e>=0&&r>=0&&e<=Bo)if(r===0&&e<=Lo){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let t=e/4294967296,n=e&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,r<<2|t&3),a.setUint32(4,n),s}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,r),(0,ra.setInt64)(n,4,e),t}}V.encodeTimeSpecToTimestamp=na;function sa(e){let r=e.getTime(),t=Math.floor(r/1e3),n=(r-t*1e3)*1e6,s=Math.floor(n/1e9);return{sec:t+s,nsec:n-s*1e9}}V.encodeDateToTimeSpec=sa;function aa(e){if(e instanceof Date){let r=sa(e);return na(r)}else return null}V.encodeTimestampExtension=aa;function ia(e){let r=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:r.getUint32(0),nsec:0};case 8:{let t=r.getUint32(0),n=r.getUint32(4),s=(t&3)*4294967296+n,a=t>>>2;return{sec:s,nsec:a}}case 12:{let t=(0,ra.getInt64)(r,4),n=r.getUint32(0);return{sec:t,nsec:n}}default:throw new Wo.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}V.decodeTimestampToTimeSpec=ia;function oa(e){let r=ia(e);return new Date(r.sec*1e3+r.nsec/1e6)}V.decodeTimestampExtension=oa;V.timestampExtension={type:V.EXT_TIMESTAMP,encode:aa,decode:oa}});var Qr=Z(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ExtensionCodec=void 0;var Kr=Bn(),zo=jn(),Xt=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(zo.timestampExtension)}register({type:r,encode:t,decode:n}){if(r>=0)this.encoders[r]=t,this.decoders[r]=n;else{let s=1+r;this.builtInEncoders[s]=t,this.builtInDecoders[s]=n}}tryToEncode(r,t){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=-1-n;return new Kr.ExtData(i,a)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=n;return new Kr.ExtData(i,a)}}}return r instanceof Kr.ExtData?r:null}decode(r,t,n){let s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(r,t,n):new Kr.ExtData(t,r)}};Yr.ExtensionCodec=Xt;Xt.defaultCodec=new Xt});var qn=Z(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.createDataView=yt.ensureUint8Array=void 0;function la(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}yt.ensureUint8Array=la;function jo(e){if(e instanceof ArrayBuffer)return new DataView(e);let r=la(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}yt.createDataView=jo});var $n=Z(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.Encoder=he.DEFAULT_INITIAL_BUFFER_SIZE=he.DEFAULT_MAX_DEPTH=void 0;var Gt=Vr(),qo=Qr(),ca=Vt(),Ho=qn();he.DEFAULT_MAX_DEPTH=100;he.DEFAULT_INITIAL_BUFFER_SIZE=2048;var Hn=class{constructor(r=qo.ExtensionCodec.defaultCodec,t=void 0,n=he.DEFAULT_MAX_DEPTH,s=he.DEFAULT_INITIAL_BUFFER_SIZE,a=!1,i=!1,o=!1,d=!1){this.extensionCodec=r,this.context=t,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=a,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.subarray(0,this.pos)}encode(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.slice(0,this.pos)}doEncode(r,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);r==null?this.encodeNil():typeof r=="boolean"?this.encodeBoolean(r):typeof r=="number"?this.encodeNumber(r):typeof r=="string"?this.encodeString(r):this.encodeObject(r,t)}ensureBufferSizeToWrite(r){let t=this.pos+r;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(r){let t=new ArrayBuffer(r),n=new Uint8Array(t),s=new DataView(t);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(r){r===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(r){Number.isSafeInteger(r)&&!this.forceIntegerToFloat?r>=0?r<128?this.writeU8(r):r<256?(this.writeU8(204),this.writeU8(r)):r<65536?(this.writeU8(205),this.writeU16(r)):r<4294967296?(this.writeU8(206),this.writeU32(r)):(this.writeU8(207),this.writeU64(r)):r>=-32?this.writeU8(224|r+32):r>=-128?(this.writeU8(208),this.writeI8(r)):r>=-32768?(this.writeU8(209),this.writeI16(r)):r>=-2147483648?(this.writeU8(210),this.writeI32(r)):(this.writeU8(211),this.writeI64(r)):this.forceFloat32?(this.writeU8(202),this.writeF32(r)):(this.writeU8(203),this.writeF64(r))}writeStringHeader(r){if(r<32)this.writeU8(160+r);else if(r<256)this.writeU8(217),this.writeU8(r);else if(r<65536)this.writeU8(218),this.writeU16(r);else if(r<4294967296)this.writeU8(219),this.writeU32(r);else throw new Error(`Too long string: ${r} bytes in UTF-8`)}encodeString(r){if(r.length>Gt.TEXT_ENCODER_THRESHOLD){let s=(0,Gt.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Gt.utf8EncodeTE)(r,this.bytes,this.pos),this.pos+=s}else{let s=(0,Gt.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Gt.utf8EncodeJs)(r,this.bytes,this.pos),this.pos+=s}}encodeObject(r,t){let n=this.extensionCodec.tryToEncode(r,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(r))this.encodeArray(r,t);else if(ArrayBuffer.isView(r))this.encodeBinary(r);else if(typeof r=="object")this.encodeMap(r,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(r)}`)}encodeBinary(r){let t=r.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,Ho.ensureUint8Array)(r);this.writeU8a(n)}encodeArray(r,t){let n=r.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of r)this.doEncode(s,t+1)}countWithoutUndefined(r,t){let n=0;for(let s of t)r[s]!==void 0&&n++;return n}encodeMap(r,t){let n=Object.keys(r);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(r,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let a of n){let i=r[a];this.ignoreUndefined&&i===void 0||(this.encodeString(a),this.doEncode(i,t+1))}}encodeExtension(r){let t=r.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(r.type),this.writeU8a(r.data)}writeU8(r){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,r),this.pos++}writeU8a(r){let t=r.length;this.ensureBufferSizeToWrite(t),this.bytes.set(r,this.pos),this.pos+=t}writeI8(r){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,r),this.pos++}writeU16(r){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,r),this.pos+=2}writeI16(r){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,r),this.pos+=2}writeU32(r){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,r),this.pos+=4}writeI32(r){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,r),this.pos+=4}writeF32(r){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,r),this.pos+=4}writeF64(r){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,r),this.pos+=8}writeU64(r){this.ensureBufferSizeToWrite(8),(0,ca.setUint64)(this.view,this.pos,r),this.pos+=8}writeI64(r){this.ensureBufferSizeToWrite(8),(0,ca.setInt64)(this.view,this.pos,r),this.pos+=8}};he.Encoder=Hn});var ua=Z(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.encode=void 0;var $o=$n(),Zo={};function Vo(e,r=Zo){return new $o.Encoder(r.extensionCodec,r.context,r.maxDepth,r.initialBufferSize,r.sortKeys,r.forceFloat32,r.ignoreUndefined,r.forceIntegerToFloat).encodeSharedRef(e)}en.encode=Vo});var da=Z(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.prettyByte=void 0;function Jo(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}tn.prettyByte=Jo});var fa=Z(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.CachedKeyDecoder=void 0;var Xo=Vr(),Go=16,Ko=16,Zn=class{constructor(r=Go,t=Ko){this.maxKeyLength=r,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(r){return r>0&&r<=this.maxKeyLength}find(r,t,n){let s=this.caches[n-1];e:for(let a of s){let i=a.bytes;for(let o=0;o<n;o++)if(i[o]!==r[t+o])continue e;return a.str}return null}store(r,t){let n=this.caches[r.length-1],s={bytes:r,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(r,t,n){let s=this.find(r,t,n);if(s!=null)return this.hit++,s;this.miss++;let a=(0,Xo.utf8DecodeJs)(r,t,n),i=Uint8Array.prototype.slice.call(r,t,t+n);return this.store(i,a),a}};rn.CachedKeyDecoder=Zn});var nn=Z(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.Decoder=xe.DataViewIndexOutOfBoundsError=void 0;var Vn=da(),Yo=Qr(),Qe=Vt(),Jn=Vr(),Xn=qn(),Qo=fa(),Re=Gr(),el=e=>{let r=typeof e;return r==="string"||r==="number"},Kt=-1,Kn=new DataView(new ArrayBuffer(0)),tl=new Uint8Array(Kn.buffer);xe.DataViewIndexOutOfBoundsError=(()=>{try{Kn.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();var ha=new xe.DataViewIndexOutOfBoundsError("Insufficient data"),rl=new Qo.CachedKeyDecoder,Gn=class{constructor(r=Yo.ExtensionCodec.defaultCodec,t=void 0,n=Qe.UINT32_MAX,s=Qe.UINT32_MAX,a=Qe.UINT32_MAX,i=Qe.UINT32_MAX,o=Qe.UINT32_MAX,d=rl){this.extensionCodec=r,this.context=t,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=a,this.maxMapLength=i,this.maxExtLength=o,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=Kn,this.bytes=tl,this.headByte=Kt,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Kt,this.stack.length=0}setBuffer(r){this.bytes=(0,Xn.ensureUint8Array)(r),this.view=(0,Xn.createDataView)(this.bytes),this.pos=0}appendBuffer(r){if(this.headByte===Kt&&!this.hasRemaining(1))this.setBuffer(r);else{let t=this.bytes.subarray(this.pos),n=(0,Xn.ensureUint8Array)(r),s=new Uint8Array(t.length+n.length);s.set(t),s.set(n,t.length),this.setBuffer(s)}}hasRemaining(r){return this.view.byteLength-this.pos>=r}createExtraByteError(r){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${r}]`)}decode(r){this.reinitializeState(),this.setBuffer(r);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(r){for(this.reinitializeState(),this.setBuffer(r);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(r){let t=!1,n;for await(let o of r){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),t=!0}catch(d){if(!(d instanceof xe.DataViewIndexOutOfBoundsError))throw d}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:a,totalPos:i}=this;throw new RangeError(`Insufficient data in parsing ${(0,Vn.prettyByte)(s)} at ${i} (${a} in the current buffer)`)}decodeArrayStream(r){return this.decodeMultiAsync(r,!0)}decodeStream(r){return this.decodeMultiAsync(r,!1)}async*decodeMultiAsync(r,t){let n=t,s=-1;for await(let a of r){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(i){if(!(i instanceof xe.DataViewIndexOutOfBoundsError))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let r=this.readHeadByte(),t;if(r>=224)t=r-256;else if(r<192)if(r<128)t=r;else if(r<144){let s=r-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r<160){let s=r-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{let s=r-160;t=this.decodeUtf8String(s,0)}else if(r===192)t=null;else if(r===194)t=!1;else if(r===195)t=!0;else if(r===202)t=this.readF32();else if(r===203)t=this.readF64();else if(r===204)t=this.readU8();else if(r===205)t=this.readU16();else if(r===206)t=this.readU32();else if(r===207)t=this.readU64();else if(r===208)t=this.readI8();else if(r===209)t=this.readI16();else if(r===210)t=this.readI32();else if(r===211)t=this.readI64();else if(r===217){let s=this.lookU8();t=this.decodeUtf8String(s,1)}else if(r===218){let s=this.lookU16();t=this.decodeUtf8String(s,2)}else if(r===219){let s=this.lookU32();t=this.decodeUtf8String(s,4)}else if(r===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===196){let s=this.lookU8();t=this.decodeBinary(s,1)}else if(r===197){let s=this.lookU16();t=this.decodeBinary(s,2)}else if(r===198){let s=this.lookU32();t=this.decodeBinary(s,4)}else if(r===212)t=this.decodeExtension(1,0);else if(r===213)t=this.decodeExtension(2,0);else if(r===214)t=this.decodeExtension(4,0);else if(r===215)t=this.decodeExtension(8,0);else if(r===216)t=this.decodeExtension(16,0);else if(r===199){let s=this.lookU8();t=this.decodeExtension(s,1)}else if(r===200){let s=this.lookU16();t=this.decodeExtension(s,2)}else if(r===201){let s=this.lookU32();t=this.decodeExtension(s,4)}else throw new Re.DecodeError(`Unrecognized type byte: ${(0,Vn.prettyByte)(r)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=t,s.position++,s.position===s.size)n.pop(),t=s.array;else continue e;else if(s.type===1){if(!el(t))throw new Re.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new Re.DecodeError("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)n.pop(),t=s.map;else{s.key=null,s.type=1;continue e}}return t}}readHeadByte(){return this.headByte===Kt&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Kt}readArraySize(){let r=this.readHeadByte();switch(r){case 220:return this.readU16();case 221:return this.readU32();default:{if(r<160)return r-144;throw new Re.DecodeError(`Unrecognized array type byte: ${(0,Vn.prettyByte)(r)}`)}}}pushMapState(r){if(r>this.maxMapLength)throw new Re.DecodeError(`Max length exceeded: map length (${r}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:r,key:null,readCount:0,map:{}})}pushArrayState(r){if(r>this.maxArrayLength)throw new Re.DecodeError(`Max length exceeded: array length (${r}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:r,array:new Array(r),position:0})}decodeUtf8String(r,t){var n;if(r>this.maxStrLength)throw new Re.DecodeError(`Max length exceeded: UTF-8 byte length (${r}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+r)throw ha;let s=this.pos+t,a;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(r))?a=this.keyDecoder.decode(this.bytes,s,r):r>Jn.TEXT_DECODER_THRESHOLD?a=(0,Jn.utf8DecodeTD)(this.bytes,s,r):a=(0,Jn.utf8DecodeJs)(this.bytes,s,r),this.pos+=t+r,a}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(r,t){if(r>this.maxBinLength)throw new Re.DecodeError(`Max length exceeded: bin length (${r}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(r+t))throw ha;let n=this.pos+t,s=this.bytes.subarray(n,n+r);return this.pos+=t+r,s}decodeExtension(r,t){if(r>this.maxExtLength)throw new Re.DecodeError(`Max length exceeded: ext length (${r}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),s=this.decodeBinary(r,t+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let r=this.view.getUint8(this.pos);return this.pos++,r}readI8(){let r=this.view.getInt8(this.pos);return this.pos++,r}readU16(){let r=this.view.getUint16(this.pos);return this.pos+=2,r}readI16(){let r=this.view.getInt16(this.pos);return this.pos+=2,r}readU32(){let r=this.view.getUint32(this.pos);return this.pos+=4,r}readI32(){let r=this.view.getInt32(this.pos);return this.pos+=4,r}readU64(){let r=(0,Qe.getUint64)(this.view,this.pos);return this.pos+=8,r}readI64(){let r=(0,Qe.getInt64)(this.view,this.pos);return this.pos+=8,r}readF32(){let r=this.view.getFloat32(this.pos);return this.pos+=4,r}readF64(){let r=this.view.getFloat64(this.pos);return this.pos+=8,r}};xe.Decoder=Gn});var Yn=Z(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.decodeMulti=pe.decode=pe.defaultDecodeOptions=void 0;var pa=nn();pe.defaultDecodeOptions={};function nl(e,r=pe.defaultDecodeOptions){return new pa.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(e)}pe.decode=nl;function sl(e,r=pe.defaultDecodeOptions){return new pa.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeMulti(e)}pe.decodeMulti=sl});var _a=Z(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ensureAsyncIterable=Pe.asyncIterableFromStream=Pe.isAsyncIterable=void 0;function ma(e){return e[Symbol.asyncIterator]!=null}Pe.isAsyncIterable=ma;function al(e){if(e==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*ga(e){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;al(n),yield n}}finally{r.releaseLock()}}Pe.asyncIterableFromStream=ga;function il(e){return ma(e)?e:ga(e)}Pe.ensureAsyncIterable=il});var wa=Z(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.decodeStream=me.decodeMultiStream=me.decodeArrayStream=me.decodeAsync=void 0;var Qn=nn(),es=_a(),sn=Yn();async function ol(e,r=sn.defaultDecodeOptions){let t=(0,es.ensureAsyncIterable)(e);return new Qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(t)}me.decodeAsync=ol;function ll(e,r=sn.defaultDecodeOptions){let t=(0,es.ensureAsyncIterable)(e);return new Qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(t)}me.decodeArrayStream=ll;function ya(e,r=sn.defaultDecodeOptions){let t=(0,es.ensureAsyncIterable)(e);return new Qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(t)}me.decodeMultiStream=ya;function cl(e,r=sn.defaultDecodeOptions){return ya(e,r)}me.decodeStream=cl});var ts=Z(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.decodeTimestampExtension=A.encodeTimestampExtension=A.decodeTimestampToTimeSpec=A.encodeTimeSpecToTimestamp=A.encodeDateToTimeSpec=A.EXT_TIMESTAMP=A.ExtData=A.ExtensionCodec=A.Encoder=A.DataViewIndexOutOfBoundsError=A.DecodeError=A.Decoder=A.decodeStream=A.decodeMultiStream=A.decodeArrayStream=A.decodeAsync=A.decodeMulti=A.decode=A.encode=void 0;var ul=ua();Object.defineProperty(A,"encode",{enumerable:!0,get:function(){return ul.encode}});var ba=Yn();Object.defineProperty(A,"decode",{enumerable:!0,get:function(){return ba.decode}});Object.defineProperty(A,"decodeMulti",{enumerable:!0,get:function(){return ba.decodeMulti}});var an=wa();Object.defineProperty(A,"decodeAsync",{enumerable:!0,get:function(){return an.decodeAsync}});Object.defineProperty(A,"decodeArrayStream",{enumerable:!0,get:function(){return an.decodeArrayStream}});Object.defineProperty(A,"decodeMultiStream",{enumerable:!0,get:function(){return an.decodeMultiStream}});Object.defineProperty(A,"decodeStream",{enumerable:!0,get:function(){return an.decodeStream}});var Ra=nn();Object.defineProperty(A,"Decoder",{enumerable:!0,get:function(){return Ra.Decoder}});Object.defineProperty(A,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return Ra.DataViewIndexOutOfBoundsError}});var dl=Gr();Object.defineProperty(A,"DecodeError",{enumerable:!0,get:function(){return dl.DecodeError}});var fl=$n();Object.defineProperty(A,"Encoder",{enumerable:!0,get:function(){return fl.Encoder}});var hl=Qr();Object.defineProperty(A,"ExtensionCodec",{enumerable:!0,get:function(){return hl.ExtensionCodec}});var pl=Bn();Object.defineProperty(A,"ExtData",{enumerable:!0,get:function(){return pl.ExtData}});var wt=jn();Object.defineProperty(A,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return wt.EXT_TIMESTAMP}});Object.defineProperty(A,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return wt.encodeDateToTimeSpec}});Object.defineProperty(A,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return wt.encodeTimeSpecToTimestamp}});Object.defineProperty(A,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return wt.decodeTimestampToTimeSpec}});Object.defineProperty(A,"encodeTimestampExtension",{enumerable:!0,get:function(){return wt.encodeTimestampExtension}});Object.defineProperty(A,"decodeTimestampExtension",{enumerable:!0,get:function(){return wt.decodeTimestampExtension}})});var oo=Z((dp,io)=>{var Nt=require("fs"),ao=require("url"),id=require("child_process").spawn;io.exports=zs;zs.XMLHttpRequest=zs;function zs(e){"use strict";e=e||{};var r=this,t=require("http"),n=require("https"),s,a,i={},o=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},l=Object.assign({},d),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],w=["TRACE","TRACK","CONNECT"],m=!1,f=!1,g=!1,S={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var R=function(p){return o||p&&u.indexOf(p.toLowerCase())===-1},b=function(p){return p&&w.indexOf(p)===-1};this.open=function(p,h,k,C,y){if(this.abort(),f=!1,g=!1,!b(p))throw new Error("SecurityError: Request method not allowed");i={method:p,url:h.toString(),async:typeof k!="boolean"?!0:k,user:C||null,password:y||null},T(this.OPENED)},this.setDisableHeaderCheck=function(p){o=p},this.setRequestHeader=function(p,h){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!R(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(m)throw new Error("INVALID_STATE_ERR: send flag is true");return l[p]=h,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&a.headers[p.toLowerCase()]&&!f?a.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||f)return"";var p="";for(var h in a.headers)h!=="set-cookie"&&h!=="set-cookie2"&&(p+=h+": "+a.headers[h]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&l[p]?l[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(m)throw new Error("INVALID_STATE_ERR: send has already been called");var h=!1,k=!1,C=ao.parse(i.url),y;switch(C.protocol){case"https:":h=!0;case"http:":y=C.hostname;break;case"file:":k=!0;break;case void 0:case"":y="localhost";break;default:throw new Error("Protocol not supported.")}if(k){if(i.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(i.async)Nt.readFile(unescape(C.pathname),function(te,Le){te?r.handleError(te,te.errno||-1):(r.status=200,r.responseText=Le.toString("utf8"),r.response=Le,T(r.DONE))});else try{this.response=Nt.readFileSync(unescape(C.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,T(r.DONE)}catch(te){this.handleError(te,te.errno||-1)}return}var U=C.port||(h?443:80),P=C.pathname+(C.search?C.search:"");if(l.Host=y,h&&U===443||U===80||(l.Host+=":"+C.port),i.user){typeof i.password>"u"&&(i.password="");var v=new Buffer(i.user+":"+i.password);l.Authorization="Basic "+v.toString("base64")}i.method==="GET"||i.method==="HEAD"?p=null:p?(l["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p),l["Content-Type"]||(l["Content-Type"]="text/plain;charset=UTF-8")):i.method==="POST"&&(l["Content-Length"]=0);var D=e.agent||!1,$={host:y,port:U,path:P,method:i.method,headers:l,agent:D};if(h&&($.pfx=e.pfx,$.key=e.key,$.passphrase=e.passphrase,$.cert=e.cert,$.ca=e.ca,$.ciphers=e.ciphers,$.rejectUnauthorized=e.rejectUnauthorized!==!1),f=!1,i.async){var Ft=h?n.request:t.request;m=!0,r.dispatchEvent("readystatechange");var Fe=function(te){if(a=te,a.statusCode===302||a.statusCode===303||a.statusCode===307){i.url=a.headers.location;var Le=ao.parse(i.url);y=Le.hostname;var Te={hostname:Le.hostname,port:Le.port,path:Le.path,method:a.statusCode===303?"GET":i.method,headers:l};h&&(Te.pfx=e.pfx,Te.key=e.key,Te.passphrase=e.passphrase,Te.cert=e.cert,Te.ca=e.ca,Te.ciphers=e.ciphers,Te.rejectUnauthorized=e.rejectUnauthorized!==!1),s=Ft(Te,Fe).on("error",We),s.end();return}T(r.HEADERS_RECEIVED),r.status=a.statusCode,a.on("data",function(Pr){if(Pr){var mo=Buffer.from(Pr);r.response=Buffer.concat([r.response,mo])}m&&T(r.LOADING)}),a.on("end",function(){m&&(m=!1,T(r.DONE),r.responseText=r.response.toString("utf8"))}),a.on("error",function(Pr){r.handleError(Pr)})},We=function(te){r.handleError(te)};s=Ft($,Fe).on("error",We),e.autoUnref&&s.on("socket",te=>{te.unref()}),p&&s.write(p),s.end(),r.dispatchEvent("loadstart")}else{var Wt=".node-xmlhttprequest-content-"+process.pid,Lt=".node-xmlhttprequest-sync-"+process.pid;Nt.writeFileSync(Lt,"","utf8");for(var fo="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify($)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Wt+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Lt+"');});response.on('error', function(error) {fs.writeFileSync('"+Wt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Lt+"');});}).on('error', function(error) {fs.writeFileSync('"+Wt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Lt+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",ho=id(process.argv[0],["-e",fo]),fd;Nt.existsSync(Lt););if(r.responseText=Nt.readFileSync(Wt,"utf8"),ho.stdin.end(),Nt.unlinkSync(Wt),r.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var po=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));r.handleError(po,503)}else{r.status=r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var Dn=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));a={statusCode:r.status,headers:Dn.data.headers},r.responseText=Dn.data.text,r.response=Buffer.from(Dn.data.data,"base64"),T(r.DONE,!0)}}},this.handleError=function(p,h){this.status=h||0,this.statusText=p,this.responseText=p.stack,f=!0,T(this.DONE)},this.abort=function(){s&&(s.abort(),s=null),l=Object.assign({},d),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),f=g=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||m)&&this.readyState!==this.DONE&&(m=!1,T(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,h){p in S||(S[p]=[]),S[p].push(h)},this.removeEventListener=function(p,h){p in S&&(S[p]=S[p].filter(function(k){return k!==h}))},this.dispatchEvent=function(p){if(typeof r["on"+p]=="function"&&(this.readyState===this.DONE&&i.async?setTimeout(function(){r["on"+p]()},0):r["on"+p]()),p in S)for(let h=0,k=S[p].length;h<k;h++)this.readyState===this.DONE?setTimeout(function(){S[p][h].call(r)},0):S[p][h].call(r)};var T=function(p){if(!(r.readyState===p||r.readyState===r.UNSENT&&g)&&(r.readyState=p,(i.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState===r.DONE)){let h;g?h="abort":f?h="error":h="load",r.dispatchEvent(h),r.dispatchEvent("loadend")}}}});var Be=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};var ue=class extends Be{};var j=typeof process<"u"&&process.release&&process.release.name==="node",Bt;if(globalThis.document)Bt=e=>new Promise((r,t)=>{let n=document.createElement("script");n.src=e,n.onload=()=>r(),n.onerror=t,document.head.appendChild(n)});else if(globalThis.importScripts)Bt=async e=>{try{globalThis.importScripts(e)}catch(r){if(r instanceof TypeError)await Promise.resolve().then(()=>ut(require(e)));else throw r}};else if(j)Bt=async e=>{let r=(await Promise.resolve().then(()=>ut(require("path")))).default;await Promise.resolve().then(()=>ut(require(r.resolve(e))))};else throw new Be("Cannot determine runtime environment");var le={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function zt(e){return!!e&&typeof e=="object"&&Object.keys(le).includes(e.type)}function ze(e){return!!e&&typeof e=="object"&&"re"in e&&"im"in e}var c={};function Zs(e){Object.keys(e).forEach(r=>c._free(e[r]))}function je(e){return c._Rf_protect(re(e)),e}function O(e,r){return c._Rf_protect(re(e)),++r.n,e}function Vs(e){let r=c._malloc(4);return c._R_ProtectWithIndex(re(e),r),{loc:c.getValue(r,"i32"),ptr:r}}function Js(e){c._Rf_unprotect(1),c._free(e.ptr)}function Xs(e,r){return c._R_Reprotect(re(e),r.loc),e}function W(e){c._Rf_unprotect(e)}function On(e,r,t){c._Rf_defineVar(re(r),re(t),re(e))}function be(e,r){let t={},n={n:0};try{let s=new ne(r);O(s,n),t.code=c.allocateUTF8(e);let a=c._R_ParseEvalString(t.code,s.ptr);return x.wrap(a)}finally{Zs(t),W(n.n)}}var dt=class extends Error{constructor(r,t){super(r),this.name="UnwindProtectException",this.cont=t}};function qe(e,r){return c.getWasmTableEntry(c.GOT.ffi_safe_eval.value)(re(e),re(r))}var xo=new WeakMap;function Gs(e,r){return xo.set(e,r),e}function Mn(e){return typeof e=="string"&&e.length===jt}var jt=63;function qt(){let e=Array.from({length:4},Eo).join("-");if(e.length!==jt)throw new Error("comlink internal error: UUID has the wrong length");return e}function Eo(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),r=15-e.length;return r>0&&(e=Array.from({length:r},()=>0).join("")+e),e}function re(e){return Xe(e)?e.ptr:e}function Ge(e,r){if(c._TYPEOF(e.ptr)!==le[r])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${r}"`)}var Ae=new Map;function Ke(e,r){let t=re(r);if(c._R_PreserveObject(t),e!==void 0){if(Mn(e)){Ae.get(e).push(t);return}throw new Error("Unexpected shelter type "+typeof e)}}function In(e,r){let t=re(r);c._R_ReleaseObject(t);let n=Ae.get(e),s=n.indexOf(t);if(s<0)throw new Error("Can't find object in shelter.");n.splice(s,1)}function Un(e){let r=Ae.get(e);for(let t of r)try{c._R_ReleaseObject(t)}catch(n){console.error(n)}Ae.set(e,[])}function Ks(e){if(zt(e))return new($t(e.type))(e);if(typeof e>"u")return new pt;if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new pt;if(e===null)return new se({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new se(e);if(typeof e=="number")return new Je(e);if(typeof e=="string")return new ce(e);if(ze(e))return new mt(e);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return new gt(e);if(Array.isArray(e))return vo(e);if(typeof e=="object")return Ze.fromObject(e);throw new Error("R object construction for this JS object is not yet supported.")}function vo(e){let r={n:0};if(e.every(n=>n&&typeof n=="object"&&!Xe(n)&&!ze(n))){let n=e,s=n.every(i=>Object.keys(i).filter(o=>!Object.keys(n[0]).includes(o)).length===0&&Object.keys(n[0]).filter(o=>!Object.keys(i).includes(o)).length===0),a=n.every(i=>Object.values(i).every(o=>Qs(o)||Ys(o)));if(s&&a)return Ze.fromD3(n)}if(e.every(n=>typeof n=="boolean"||n===null))return new se(e);if(e.every(n=>typeof n=="number"||n===null))return new Je(e);if(e.every(n=>typeof n=="string"||n===null))return new ce(e);try{let n=new de([new q("c"),...e]);return O(n,r),n.eval()}finally{W(r.n)}}var z=class{constructor(r){this.ptr=r}type(){let r=c._TYPEOF(this.ptr);return Object.keys(le).find(n=>le[n]===r)}},ht,Or,He=class He extends z{constructor(t){if(!(t instanceof z))return Ks(t);super(t.ptr);I(this,ht)}static wrap(t){let n=c._TYPEOF(t),s=Object.keys(le)[Object.values(le).indexOf(n)];return new($t(s))(new z(t))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(t){return L[t]}getPropertyValue(t){return this[t]}inspect(){be(".Internal(inspect(x))",{x:this})}isNull(){return c._TYPEOF(this.ptr)===le.null}isNa(){try{let t=be("is.na(x)",{x:this});return je(t),t.toBoolean()}finally{W(1)}}isUnbound(){return this.ptr===L.unboundValue.ptr}attrs(){return $e.wrap(c._ATTRIB(this.ptr))}class(){let t={n:0},n=new de([new q("class"),this]);O(n,t);try{return n.eval()}finally{W(t.n)}}setNames(t){let n;if(t===null)n=L.null;else if(Array.isArray(t)&&t.every(s=>typeof s=="string"||s===null))n=new ce(t);else throw new Error("Argument to setNames must be null or an Array of strings or null");return c._Rf_setAttrib(this.ptr,L.namesSymbol.ptr,n.ptr),this}names(){let t=ce.wrap(c._Rf_getAttrib(this.ptr,L.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let n=this.names();return n&&n.includes(t)}toJs(t={depth:0},n=1){throw new Error("This R object cannot be converted to JS")}subset(t){return ke(this,ht,Or).call(this,t,L.bracketSymbol.ptr)}get(t){return ke(this,ht,Or).call(this,t,L.bracket2Symbol.ptr)}getDollar(t){return ke(this,ht,Or).call(this,t,L.dollarSymbol.ptr)}pluck(...t){let n=Vs(L.null);try{let s=(i,o)=>{let d=i.get(o);return Xs(d,n)},a=t.reduce(s,this);return a.isNull()?void 0:a}finally{Js(n)}}set(t,n){let s={n:0};try{let a=new He(t);O(a,s);let i=new He(n);O(i,s);let o=new q("[[<-"),d=c._Rf_lang4(o.ptr,this.ptr,a.ptr,i.ptr);return O(d,s),He.wrap(qe(d,L.baseEnv))}finally{W(s.n)}}static getMethods(t){let n=new Set,s=t;do Object.getOwnPropertyNames(s).map(a=>n.add(a));while(s=Object.getPrototypeOf(s));return[...n.keys()].filter(a=>typeof t[a]=="function")}};ht=new WeakSet,Or=function(t,n){let s={n:0};try{let a=new He(t);O(a,s);let i=c._Rf_lang3(n,this.ptr,a.ptr);return O(i,s),He.wrap(qe(i,L.baseEnv))}finally{W(s.n)}};var x=He,pt=class extends x{constructor(){return super(new z(c.getValue(c._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},q=class extends x{constructor(r){if(r instanceof z){Ge(r,"symbol"),super(r);return}let t=c.allocateUTF8(r);try{super(new z(c._Rf_install(t)))}finally{c._free(t)}}toJs(){let r=this.toObject();return{type:"symbol",printname:r.printname,symvalue:r.symvalue,internal:r.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return Ve.wrap(c._PRINTNAME(this.ptr))}symvalue(){return x.wrap(c._SYMVALUE(this.ptr))}internal(){return x.wrap(c._INTERNAL(this.ptr))}},$e=class e extends x{constructor(r){if(r instanceof z)return Ge(r,"pairlist"),super(r),this;let t={n:0};try{let{names:n,values:s}=_t(r),a=e.wrap(c._Rf_allocList(s.length));O(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(new x(s[i]));a.setNames(n),super(a)}finally{W(t.n)}}get length(){return this.toArray().length}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}entries(r={depth:1}){let t=this.toJs(r);return t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){let n=[],s=!1,a=[];for(let o=this;!o.isNull();o=o.cdr()){let d=o.tag();d.isNull()?n.push(""):(s=!0,n.push(d.toString())),r.depth&&t>=r.depth?a.push(o.car()):a.push(o.car().toJs(r,t+1))}return{type:"pairlist",names:s?n:null,values:a}}includes(r){return r in this.toObject()}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}tag(){return x.wrap(c._TAG(this.ptr))}},de=class e extends x{constructor(r){if(r instanceof z)return Ge(r,"call"),super(r),this;let t={n:0};try{let{values:n}=_t(r),s=n.map(i=>O(new x(i),t)),a=e.wrap(c._Rf_allocVector(le.call,n.length));O(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(s[i]);super(a)}finally{W(t.n)}}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}eval(){return c.webr.evalR(this,{env:L.baseEnv})}capture(r={}){return c.webr.captureR(this,r)}deparse(){let r={n:0};try{let t=c._Rf_lang2(new q("deparse1").ptr,c._Rf_lang2(new q("quote").ptr,this.ptr));O(t,r);let n=ce.wrap(qe(t,L.baseEnv));return O(n,r),n.toString()}finally{W(r.n)}}},fe=class e extends x{constructor(r,t=null){if(r instanceof z){if(Ge(r,"list"),super(r),t){if(t.length!==this.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");this.setNames(t)}return this}let n={n:0};try{let s=_t(r),a=c._Rf_allocVector(le.list,s.values.length);O(a,n),s.values.forEach((o,d)=>{ea(o)?c._SET_VECTOR_ELT(a,d,new e(o).ptr):c._SET_VECTOR_ELT(a,d,new x(o).ptr)});let i=t||s.names;if(i&&i.length!==s.values.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");x.wrap(a).setNames(i),super(new z(a))}finally{W(n.n)}}get length(){return c._LENGTH(this.ptr)}isDataFrame(){let r=$e.wrap(c._ATTRIB(this.ptr)).get("class");return!r.isNull()&&r.toArray().includes("data.frame")}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}toD3(){if(!this.isDataFrame())throw new Error("Can't convert R list object to D3 format. Object must be of class 'data.frame'.");return this.entries().reduce((t,n)=>(n[1].forEach((s,a)=>t[a]=Object.assign(t[a]||{},{[n[0]]:s})),t),[])}entries(r={depth:-1}){let t=this.toJs(r);return this.isDataFrame()&&r.depth<0&&(t.values=t.values.map(n=>n.toArray())),t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>r.depth&&t>=r.depth?this.get(n+1):this.get(n+1).toJs(r,t+1))}}},Ze=class e extends fe{constructor(r){if(r instanceof z){if(super(r),!this.isDataFrame())throw new Error("Can't construct `RDataFrame`. Supplied R object is not a `data.frame`.");return this}return e.fromObject(r)}static fromObject(r){let{names:t,values:n}=_t(r),s={n:0};try{let a=!!t&&t.length>0&&t.every(o=>o),i=n.length>0&&n.every(o=>Array.isArray(o)||ArrayBuffer.isView(o)||o instanceof ArrayBuffer);if(a&&i){let o=n,d=o.every(u=>u.length===o[0].length),l=o.every(u=>Qs(u[0])||Ys(u[0]));if(d&&l){let u=new fe({type:"list",names:t,values:o.map(m=>Ks(m))});O(u,s);let w=new de([new q("as.data.frame"),u]);return O(w,s),new e(w.eval())}}}finally{W(s.n)}throw new Error("Can't construct `data.frame`. Source object is not eligible.")}static fromD3(r){return this.fromObject(Object.fromEntries(Object.keys(r[0]).map(t=>[t,r.map(n=>n[t])])))}},ft=class extends x{exec(...r){let t={n:0};try{let n=new de([this,...r]);return O(n,t),n.eval()}finally{W(t.n)}}capture(r={},...t){let n={n:0};try{let s=new de([this,...t]);return O(s,n),s.capture(r)}finally{W(n.n)}}},Mr=class Mr extends x{constructor(r){if(r instanceof z){Ge(r,"string"),super(r);return}let t=c.allocateUTF8(r);try{super(new z(c._Rf_mkCharCE(t,Mr.CEType.CE_UTF8)))}finally{c._free(t)}}toString(){let r=c._vmaxget();try{return c.UTF8ToString(c._Rf_translateCharUTF8(this.ptr))}finally{c._vmaxset(r)}}toJs(){return{type:"string",value:this.toString()}}};Mr.CEType={CE_NATIVE:0,CE_UTF8:1,CE_LATIN1:2,CE_BYTES:3,CE_SYMBOL:5,CE_ANY:99};var Ve=Mr,ne=class extends x{constructor(r={}){if(r instanceof z)return Ge(r,"environment"),super(r),this;let t=0;try{let{names:n,values:s}=_t(r),a=je(c._R_NewEnv(L.globalEnv.ptr,0,0));++t,s.forEach((i,o)=>{let d=n?n[o]:null;if(!d)throw new Error("Can't create object in new environment with empty symbol name");let l=new q(d),u=je(new x(i));try{On(a,l,u)}finally{W(1)}}),super(new z(a))}finally{W(t)}}ls(r=!1,t=!0){return ce.wrap(c._R_lsInternal3(this.ptr,Number(r),Number(t))).toArray()}bind(r,t){let n=new q(r),s=je(new x(t));try{On(this,n,s)}finally{W(1)}}names(){return this.ls(!0,!0)}frame(){return x.wrap(c._FRAME(this.ptr))}subset(r){if(typeof r=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(r)}toObject({depth:r=-1}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>{let s=this.getDollar(t[n]);return[t[n],r<0?s:s.toJs({depth:r})]}))}toJs(r={depth:0},t=1){let n=this.names(),s=[...Array(n.length).keys()].map(a=>r.depth&&t>=r.depth?this.getDollar(n[a]):this.getDollar(n[a]).toJs(r,t+1));return{type:"environment",names:n,values:s}}},De=class extends x{constructor(r,t,n){if(r instanceof z)return Ge(r,t),super(r),this;let s={n:0};try{let{names:a,values:i}=_t(r),o=c._Rf_allocVector(le[t],i.length);O(o,s),i.forEach(n(o)),x.wrap(o).setNames(a),super(new z(o))}finally{W(s.n)}}get length(){return c._LENGTH(this.ptr)}get(r){return super.get(r)}subset(r){return super.subset(r)}getDollar(){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let r={n:0};try{let t=c._Rf_lang2(new q("is.na").ptr,this.ptr);O(t,r);let n=se.wrap(qe(t,L.baseEnv));O(n,r);let s=n.toTypedArray();return Array.from(s).map(a=>!!a)}finally{W(r.n)}}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:r[n])}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),s=n.map(([a])=>a);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&s.some(a=>!a))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,i)=>n.findIndex(o=>o[0]===a[0])===i))}entries(){let r=this.toArray(),t=this.names();return r.map((n,s)=>[t?t[s]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},Ir,Ur=class Ur extends De{constructor(r){super(r,"logical",E(Ur,Ir))}getBoolean(r){return this.get(r).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getBoolean(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._LOGICAL(this.ptr)/4,c._LOGICAL(this.ptr)/4+this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!r[n])}};Ir=new WeakMap,I(Ur,Ir,r=>{let t=c._LOGICAL(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:!!s,"i32")}});var se=Ur,Nr,Cr=class Cr extends De{constructor(r){super(r,"integer",E(Cr,Nr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._INTEGER(this.ptr)/4,c._INTEGER(this.ptr)/4+this.length))}};Nr=new WeakMap,I(Cr,Nr,r=>{let t=c._INTEGER(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:Math.round(Number(s)),"i32")}});var Ht=Cr,Fr,Wr=class Wr extends De{constructor(r){super(r,"double",E(Wr,Fr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._REAL(this.ptr)/8,c._REAL(this.ptr)/8+this.length))}};Fr=new WeakMap,I(Wr,Fr,r=>{let t=c._REAL(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*a,s===null?n:s,"double")}});var Je=Wr,Lr,Br=class Br extends De{constructor(r){super(r,"complex",E(Br,Lr))}getComplex(r){return this.get(r).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getComplex(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS object");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._COMPLEX(this.ptr)/8,c._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:r[2*n],im:r[2*n+1]})}};Lr=new WeakMap,I(Br,Lr,r=>{let t=c._COMPLEX(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*(2*a),s===null?n:s.re,"double"),c.setValue(t+8*(2*a+1),s===null?n:s.im,"double")}});var mt=Br,zr,jr=class jr extends De{constructor(r){super(r,"character",E(jr,zr))}getString(r){return this.get(r).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getString(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS string");return r}toTypedArray(){return new Uint32Array(c.HEAPU32.subarray(c._STRING_PTR(this.ptr)/4,c._STRING_PTR(this.ptr)/4+this.length))}toArray(){let r=c._vmaxget();try{return this.detectMissing().map((t,n)=>t?null:c.UTF8ToString(c._Rf_translateCharUTF8(c._STRING_ELT(this.ptr,n))))}finally{c._vmaxset(r)}}};zr=new WeakMap,I(jr,zr,r=>(t,n)=>{t===null?c._SET_STRING_ELT(r,n,L.naString.ptr):c._SET_STRING_ELT(r,n,new Ve(t).ptr)});var ce=jr,qr,Hr=class Hr extends De{constructor(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r)),super(r,"raw",E(Hr,qr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Uint8Array(c.HEAPU8.subarray(c._RAW(this.ptr),c._RAW(this.ptr)+this.length))}};qr=new WeakMap,I(Hr,qr,r=>{let t=c._RAW(r);return(n,s)=>{c.setValue(t+s,Number(n),"i8")}});var gt=Hr;function _t(e){return zt(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!ze(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function $t(e){let r={object:x,null:pt,symbol:q,pairlist:$e,closure:ft,environment:ne,call:de,special:ft,builtin:ft,string:Ve,logical:se,integer:Ht,double:Je,complex:mt,character:ce,list:fe,raw:gt,function:ft,dataframe:Ze};return e in r?r[e]:x}function Xe(e){return e instanceof x}function Ys(e){let r=["logical","integer","double","complex","character"];return Xe(e)&&r.includes(e.type())||Xe(e)&&e.isNa()}function Qs(e){return e===null||typeof e=="number"||typeof e=="boolean"||typeof e=="string"||ze(e)}var L;function Nn(){L={baseEnv:ne.wrap(c.getValue(c._R_BaseEnv,"*")),bracket2Symbol:q.wrap(c.getValue(c._R_Bracket2Symbol,"*")),bracketSymbol:q.wrap(c.getValue(c._R_BracketSymbol,"*")),dollarSymbol:q.wrap(c.getValue(c._R_DollarSymbol,"*")),emptyEnv:ne.wrap(c.getValue(c._R_EmptyEnv,"*")),false:se.wrap(c.getValue(c._R_FalseValue,"*")),globalEnv:ne.wrap(c.getValue(c._R_GlobalEnv,"*")),na:se.wrap(c.getValue(c._R_LogicalNAValue,"*")),namesSymbol:q.wrap(c.getValue(c._R_NamesSymbol,"*")),naString:x.wrap(c.getValue(c._R_NaString,"*")),null:pt.wrap(c.getValue(c._R_NilValue,"*")),true:se.wrap(c.getValue(c._R_TrueValue,"*")),unboundValue:x.wrap(c.getValue(c._R_UnboundValue,"*"))}}function Zt(){let e={resolve:()=>{},reject:()=>{},promise:Promise.resolve()},r=new Promise((t,n)=>{e.resolve=t,e.reject=n});return e.promise=r,e}function Ye(e,r,t,...n){return e==null||So(e)?e:e instanceof ArrayBuffer?new Uint8Array(e):r(e)?t(e,...n):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(s=>Ye(s,r,t,...n)):e instanceof z?e:typeof e=="object"?Object.fromEntries(Object.entries(e).map(([s,a])=>[s,Ye(a,r,t,...n)])):e}function So(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function $r(e){let r="Reached the unreachable";throw r=r+(e?": "+e:"."),new Be(r)}function ea(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!ArrayBuffer.isView(e)&&!ze(e)&&!zt(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof z)&&Object.getPrototypeOf(e)===Object.prototype}var Af=new TextEncoder;function Yt(e,r){return Ea({type:"request",data:{uuid:qt(),msg:e}},r)}function on(e,r,t){return Ea({type:"response",data:{uuid:e,resp:r}},t)}function Ea(e,r){return r&&Gs(e,r),e}function va(e,r){return{type:"sync-request",data:{msg:e,reqData:r}}}function ml(e){return!!e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function Qt(e){return ml(e)&&e.payloadType==="ptr"}var Ta=ut(ts());var _l=new TextDecoder("utf-8"),bt,Rt,er,tr,xt,cn=class{constructor(r,t,n=[]){I(this,bt,!1);I(this,Rt);I(this,er);I(this,tr);I(this,xt);this.syncifier=new ss;this.endpoint=r,this.msg=t,this.transfers=n,F(this,Rt,!1)}scheduleSync(){if(!E(this,bt))return F(this,bt,!0),this.syncifier.scheduleTask(this),F(this,xt,this.doSync()),E(this,xt).next(),this}poll(){if(!E(this,bt))throw new Error("Task not synchronously scheduled");let{done:r,value:t}=E(this,xt).next();return r?(F(this,Rt,!0),F(this,er,t),!0):!1}*doSync(){let{endpoint:r,msg:t,transfers:n}=this,s=new Int32Array(new SharedArrayBuffer(8)),a=this.signalBuffer,i=this.taskId,o=Sa(jt),d=va(t,{sizeBuffer:s,dataBuffer:o,signalBuffer:a,taskId:i});if(r.postMessage(d,n),yield,Atomics.load(s,1)===0){let u=_l.decode(o.slice(0,jt));yl(o);let w=Atomics.load(s,0);o=Sa(w),r.postMessage({id:u,dataBuffer:o}),yield}let l=Atomics.load(s,0);return(0,Ta.decode)(o.slice(0,l))}get result(){if(E(this,tr))throw E(this,tr);if(E(this,Rt))return E(this,er);throw new Error("Not ready.")}syncify(){return this.scheduleSync(),this.syncifier.syncifyTask(this),this.result}};bt=new WeakMap,Rt=new WeakMap,er=new WeakMap,tr=new WeakMap,xt=new WeakMap;var ss=class{constructor(){this.nextTaskId=new Int32Array([1]),this.signalBuffer=new Int32Array(new SharedArrayBuffer(32*4+4)),this.tasks=new Map}scheduleTask(r){r.taskId=this.nextTaskId[0],this.nextTaskId[0]+=2,r.signalBuffer=this.signalBuffer,this.tasks.set(r.taskId,r)}waitOnSignalBuffer(){for(;;)switch(Atomics.wait(this.signalBuffer,0,0,50)){case"ok":case"not-equal":return;case"timed-out":as[0]!==0&&ka();break;default:throw new Error("Unreachable")}}*tasksIdsToWakeup(){let r=Atomics.load(this.signalBuffer,0);for(let t=0;t<32;t++){let n=1<<t;r&n&&(Atomics.and(this.signalBuffer,0,~n),yield Atomics.exchange(this.signalBuffer,t+1,0))}}pollTasks(r){let t=!1;for(let n of this.tasksIdsToWakeup()){let s=this.tasks.get(n);if(!s)throw new Error(`Assertion error: unknown taskId ${n}.`);s.poll()&&(this.tasks.delete(n),s===r&&(t=!0))}return t}syncifyTask(r){for(;;)if(this.waitOnSignalBuffer(),this.pollTasks(r))return}},ln=[];function Sa(e){let r=Math.ceil(Math.log2(e));ln[r]||(ln[r]=[]);let t=ln[r].pop();return t?(t.fill(0),t):new Uint8Array(new SharedArrayBuffer(2**r))}function yl(e){let r=Math.ceil(Math.log2(e.byteLength));ln[r].push(e)}var as=new Int32Array(new ArrayBuffer(4)),ka=()=>{throw as[0]=0,new Error("Interrupted!")};function Aa(e){ka=e}function Da(e){as=new Int32Array(e)}j&&(globalThis.Worker=require("worker_threads").Worker);var et,rr,tt,nr,un=class{constructor(){I(this,et);I(this,rr,()=>0);I(this,tt,new Int32Array(new SharedArrayBuffer(4)));I(this,nr,()=>{});this.onMessageFromMainThread=()=>{};F(this,et,j?require("worker_threads").parentPort:globalThis),Da(E(this,tt).buffer),Aa(()=>this.handleInterrupt())}resolve(){this.write({type:"resolve",data:E(this,tt).buffer})}write(r,t){E(this,et).postMessage(r,t)}writeSystem(r,t){E(this,et).postMessage({type:"system",data:r},t)}read(){let r={type:"read"};return new cn(E(this,et),r).syncify()}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);E(this,rr).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}setInterrupt(r){F(this,nr,r)}handleInterrupt(){E(this,tt)[0]!==0&&(E(this,tt)[0]=0,E(this,nr).call(this))}setDispatchHandler(r){F(this,rr,r)}};et=new WeakMap,rr=new WeakMap,tt=new WeakMap,nr=new WeakMap;var fn=ut(ts());j&&(globalThis.Worker=require("worker_threads").Worker);var Et,sr,ar,ir,or,lr,dn=class{constructor(r){I(this,Et);I(this,sr);I(this,ar);I(this,ir,Date.now());I(this,or,()=>0);I(this,lr,()=>{});this.onMessageFromMainThread=()=>{};if(!r.clientId||!r.location)throw new ue("Can't start service worker channel");F(this,sr,r.clientId),F(this,ar,r.location),F(this,Et,j?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){E(this,Et).postMessage(r,t)}writeSystem(r,t){E(this,Et).postMessage({type:"system",data:r},t)}syncRequest(r){let t=Yt(r);this.write({type:"sync-request",data:t});let n=0;for(;;)try{let s=new URL("__wasm__/webr-fetch-request/",E(this,ar)),a=new XMLHttpRequest;a.timeout=6e4,a.responseType="arraybuffer",a.open("POST",s,!1);let i={clientId:E(this,sr),uuid:t.data.uuid};return a.send((0,fn.encode)(i)),(0,fn.decode)(a.response)}catch(s){if(s instanceof DOMException&&n++<1e3)console.log("Service worker request failed - resending request");else throw s}}read(){return this.syncRequest({type:"read"}).data.resp}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);E(this,or).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}setInterrupt(r){F(this,lr,r)}handleInterrupt(){Date.now()>E(this,ir)+1e3&&(F(this,ir,Date.now()),this.syncRequest({type:"interrupt"}).data.resp&&E(this,lr).call(this))}setDispatchHandler(r){F(this,or,r)}};Et=new WeakMap,sr=new WeakMap,ar=new WeakMap,ir=new WeakMap,or=new WeakMap,lr=new WeakMap;j&&(globalThis.Worker=require("worker_threads").Worker);var vt,St,cr,rt,pn,hn=class{constructor(){I(this,vt);I(this,St,new Map);I(this,cr,()=>0);I(this,rt,0);I(this,pn,async()=>{for(;;)try{F(this,rt,0);let r=await this.request({type:"read"});if(r.type==="stdin"){let t=Module.allocateUTF8(r.data);Module._strcpy(Module._DLLbuf,t),Module.setValue(Module._DLLbufp,Module._DLLbuf,"*"),Module._free(t);try{for(;Module._R_ReplDLLdo1()>0;);}catch(n){if(n instanceof WebAssembly.Exception)Module._R_ReplDLLinit(),Module._R_ReplDLLdo1();else throw n}}else E(this,cr).call(this,r)}catch(r){if(r instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:r.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),!(r instanceof WebAssembly.Exception))throw r}});F(this,vt,j?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){E(this,vt).postMessage(r,t)}writeSystem(r,t){E(this,vt).postMessage({type:"system",data:r},t)}read(){throw new ue("Unable to synchronously read when using the `PostMessage` channel.")}inputOrDispatch(){if(E(this,rt)>0){F(this,rt,0);let r=Module.allocateUTF8OnStack("Can't block for input when using the PostMessage communication channel.");Module._Rf_error(r)}return $s(this,rt)._++,0}run(r){let t=r||[];t.unshift("R");let n=t.length,s=Module._malloc(4*(n+1));t.forEach((a,i)=>{let o=s+4*i,d=Module.allocateUTF8(a);Module.setValue(o,d,"*")}),this.writeSystem({type:"console.warn",data:"WebR is using `PostMessage` communication channel, nested R REPLs are not available."}),Module._Rf_initialize_R(n,s),Module._setup_Rmainloop(),Module._R_ReplDLLinit(),Module._R_ReplDLLdo1(),E(this,pn).call(this)}setDispatchHandler(r){F(this,cr,r)}async request(r,t){let n=Yt(r,t),{resolve:s,promise:a}=Zt();return E(this,St).set(n.data.uuid,s),this.write(n),a}setInterrupt(){}handleInterrupt(){}onMessageFromMainThread(r){let t=r,n=t.data.uuid,s=E(this,St).get(n);s?(E(this,St).delete(n),s(t.data.resp)):console.warn("Can't find request.")}};vt=new WeakMap,St=new WeakMap,cr=new WeakMap,rt=new WeakMap,pn=new WeakMap;var Oe={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2,PostMessage:3};function Ia(e){switch(e.data.channelType){case Oe.SharedArrayBuffer:return new un;case Oe.ServiceWorker:return new dn(e.data);case Oe.PostMessage:return new hn;default:throw new ue("Unknown worker channel type received")}}function Ot(e){let r=e.length;for(;--r>=0;)e[r]=0}var wl=0,yi=1,bl=2,Rl=3,xl=258,Ds=29,vr=256,gr=vr+1+Ds,At=30,Ps=19,wi=2*gr+1,nt=15,is=16,El=7,Os=256,bi=16,Ri=17,xi=18,bs=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),bn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ei=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sl=512,ve=new Array((gr+2)*2);Ot(ve);var hr=new Array(At*2);Ot(hr);var _r=new Array(Sl);Ot(_r);var yr=new Array(xl-Rl+1);Ot(yr);var Ms=new Array(Ds);Ot(Ms);var Rn=new Array(At);Ot(Rn);function os(e,r,t,n,s){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}var vi,Si,Ti;function ls(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var ki=e=>e<256?_r[e]:_r[256+(e>>>7)],wr=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},K=(e,r,t)=>{e.bi_valid>is-t?(e.bi_buf|=r<<e.bi_valid&65535,wr(e,e.bi_buf),e.bi_buf=r>>is-e.bi_valid,e.bi_valid+=t-is):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},_e=(e,r,t)=>{K(e,t[r*2],t[r*2+1])},Ai=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},Tl=e=>{e.bi_valid===16?(wr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},kl=(e,r)=>{let t=r.dyn_tree,n=r.max_code,s=r.stat_desc.static_tree,a=r.stat_desc.has_stree,i=r.stat_desc.extra_bits,o=r.stat_desc.extra_base,d=r.stat_desc.max_length,l,u,w,m,f,g,S=0;for(m=0;m<=nt;m++)e.bl_count[m]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<wi;l++)u=e.heap[l],m=t[t[u*2+1]*2+1]+1,m>d&&(m=d,S++),t[u*2+1]=m,!(u>n)&&(e.bl_count[m]++,f=0,u>=o&&(f=i[u-o]),g=t[u*2],e.opt_len+=g*(m+f),a&&(e.static_len+=g*(s[u*2+1]+f)));if(S!==0){do{for(m=d-1;e.bl_count[m]===0;)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,S-=2}while(S>0);for(m=d;m!==0;m--)for(u=e.bl_count[m];u!==0;)w=e.heap[--l],!(w>n)&&(t[w*2+1]!==m&&(e.opt_len+=(m-t[w*2+1])*t[w*2],t[w*2+1]=m),u--)}},Di=(e,r,t)=>{let n=new Array(nt+1),s=0,a,i;for(a=1;a<=nt;a++)s=s+t[a-1]<<1,n[a]=s;for(i=0;i<=r;i++){let o=e[i*2+1];o!==0&&(e[i*2]=Ai(n[o]++,o))}},Al=()=>{let e,r,t,n,s,a=new Array(nt+1);for(t=0,n=0;n<Ds-1;n++)for(Ms[n]=t,e=0;e<1<<bs[n];e++)yr[t++]=n;for(yr[t-1]=n,s=0,n=0;n<16;n++)for(Rn[n]=s,e=0;e<1<<bn[n];e++)_r[s++]=n;for(s>>=7;n<At;n++)for(Rn[n]=s<<7,e=0;e<1<<bn[n]-7;e++)_r[256+s++]=n;for(r=0;r<=nt;r++)a[r]=0;for(e=0;e<=143;)ve[e*2+1]=8,e++,a[8]++;for(;e<=255;)ve[e*2+1]=9,e++,a[9]++;for(;e<=279;)ve[e*2+1]=7,e++,a[7]++;for(;e<=287;)ve[e*2+1]=8,e++,a[8]++;for(Di(ve,gr+1,a),e=0;e<At;e++)hr[e*2+1]=5,hr[e*2]=Ai(e,5);vi=new os(ve,bs,vr+1,gr,nt),Si=new os(hr,bn,0,At,nt),Ti=new os(new Array(0),vl,0,Ps,El)},Pi=e=>{let r;for(r=0;r<gr;r++)e.dyn_ltree[r*2]=0;for(r=0;r<At;r++)e.dyn_dtree[r*2]=0;for(r=0;r<Ps;r++)e.bl_tree[r*2]=0;e.dyn_ltree[Os*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Oi=e=>{e.bi_valid>8?wr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ua=(e,r,t,n)=>{let s=r*2,a=t*2;return e[s]<e[a]||e[s]===e[a]&&n[r]<=n[t]},cs=(e,r,t)=>{let n=e.heap[t],s=t<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Ua(r,e.heap[s+1],e.heap[s],e.depth)&&s++,!Ua(r,n,e.heap[s],e.depth));)e.heap[t]=e.heap[s],t=s,s<<=1;e.heap[t]=n},Na=(e,r,t)=>{let n,s,a=0,i,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,s=e.pending_buf[e.sym_buf+a++],n===0?_e(e,s,r):(i=yr[s],_e(e,i+vr+1,r),o=bs[i],o!==0&&(s-=Ms[i],K(e,s,o)),n--,i=ki(n),_e(e,i,t),o=bn[i],o!==0&&(n-=Rn[i],K(e,n,o)));while(a<e.sym_next);_e(e,Os,r)},Rs=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,s=r.stat_desc.has_stree,a=r.stat_desc.elems,i,o,d=-1,l;for(e.heap_len=0,e.heap_max=wi,i=0;i<a;i++)t[i*2]!==0?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):t[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=n[l*2+1]);for(r.max_code=d,i=e.heap_len>>1;i>=1;i--)cs(e,t,i);l=a;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],cs(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,t[l*2]=t[i*2]+t[o*2],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,t[i*2+1]=t[o*2+1]=l,e.heap[1]=l++,cs(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],kl(e,r),Di(t,d,e.bl_count)},Ca=(e,r,t)=>{let n,s=-1,a,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)&&(o<l?e.bl_tree[a*2]+=o:a!==0?(a!==s&&e.bl_tree[a*2]++,e.bl_tree[bi*2]++):o<=10?e.bl_tree[Ri*2]++:e.bl_tree[xi*2]++,o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4))},Fa=(e,r,t)=>{let n,s=-1,a,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),n=0;n<=t;n++)if(a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)){if(o<l)do _e(e,a,e.bl_tree);while(--o!==0);else a!==0?(a!==s&&(_e(e,a,e.bl_tree),o--),_e(e,bi,e.bl_tree),K(e,o-3,2)):o<=10?(_e(e,Ri,e.bl_tree),K(e,o-3,3)):(_e(e,xi,e.bl_tree),K(e,o-11,7));o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4)}},Dl=e=>{let r;for(Ca(e,e.dyn_ltree,e.l_desc.max_code),Ca(e,e.dyn_dtree,e.d_desc.max_code),Rs(e,e.bl_desc),r=Ps-1;r>=3&&e.bl_tree[Ei[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},Pl=(e,r,t,n)=>{let s;for(K(e,r-257,5),K(e,t-1,5),K(e,n-4,4),s=0;s<n;s++)K(e,e.bl_tree[Ei[s]*2+1],3);Fa(e,e.dyn_ltree,r-1),Fa(e,e.dyn_dtree,t-1)},Ol=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<vr;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},Wa=!1,Ml=e=>{Wa||(Al(),Wa=!0),e.l_desc=new ls(e.dyn_ltree,vi),e.d_desc=new ls(e.dyn_dtree,Si),e.bl_desc=new ls(e.bl_tree,Ti),e.bi_buf=0,e.bi_valid=0,Pi(e)},Mi=(e,r,t,n)=>{K(e,(wl<<1)+(n?1:0),3),Oi(e),wr(e,t),wr(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},Il=e=>{K(e,yi<<1,3),_e(e,Os,ve),Tl(e)},Ul=(e,r,t,n)=>{let s,a,i=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=Ol(e)),Rs(e,e.l_desc),Rs(e,e.d_desc),i=Dl(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=t+5,t+4<=s&&r!==-1?Mi(e,r,t,n):e.strategy===4||a===s?(K(e,(yi<<1)+(n?1:0),3),Na(e,ve,hr)):(K(e,(bl<<1)+(n?1:0),3),Pl(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Na(e,e.dyn_ltree,e.dyn_dtree)),Pi(e),n&&Oi(e)},Nl=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(yr[t]+vr+1)*2]++,e.dyn_dtree[ki(r)*2]++),e.sym_next===e.sym_end),Cl=Ml,Fl=Mi,Wl=Ul,Ll=Nl,Bl=Il,zl={_tr_init:Cl,_tr_stored_block:Fl,_tr_flush_block:Wl,_tr_tally:Ll,_tr_align:Bl},jl=(e,r,t,n)=>{let s=e&65535|0,a=e>>>16&65535|0,i=0;for(;t!==0;){i=t>2e3?2e3:t,t-=i;do s=s+r[n++]|0,a=a+s|0;while(--i);s%=65521,a%=65521}return s|a<<16|0},br=jl,ql=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},Hl=new Uint32Array(ql()),$l=(e,r,t,n)=>{let s=Hl,a=n+t;e^=-1;for(let i=n;i<a;i++)e=e>>>8^s[(e^r[i])&255];return e^-1},H=$l,it={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Mt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Zl,_tr_stored_block:xs,_tr_flush_block:Vl,_tr_tally:Ue,_tr_align:Jl}=zl,{Z_NO_FLUSH:Ne,Z_PARTIAL_FLUSH:Xl,Z_FULL_FLUSH:Gl,Z_FINISH:ie,Z_BLOCK:La,Z_OK:J,Z_STREAM_END:Ba,Z_STREAM_ERROR:ye,Z_DATA_ERROR:Kl,Z_BUF_ERROR:us,Z_DEFAULT_COMPRESSION:Yl,Z_FILTERED:Ql,Z_HUFFMAN_ONLY:mn,Z_RLE:ec,Z_FIXED:tc,Z_DEFAULT_STRATEGY:rc,Z_UNKNOWN:nc,Z_DEFLATED:vn}=Mt,sc=9,ac=15,ic=8,oc=29,lc=256,Es=lc+1+oc,cc=30,uc=19,dc=2*Es+1,fc=15,M=3,Ie=258,we=Ie+M+1,hc=32,Dt=42,Is=57,vs=69,Ss=73,Ts=91,ks=103,st=113,dr=666,G=1,It=2,ot=3,Ut=4,pc=3,at=(e,r)=>(e.msg=it[r],r),za=e=>e*2-(e>4?9:0),Me=e=>{let r=e.length;for(;--r>=0;)e[r]=0},mc=e=>{let r,t,n,s=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=s?t-s:0;while(--r);r=s,n=r;do t=e.prev[--n],e.prev[n]=t>=s?t-s:0;while(--r)},gc=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,Ce=gc,Q=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},ee=(e,r)=>{Vl(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Q(e.strm)},N=(e,r)=>{e.pending_buf[e.pending++]=r},ur=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},As=(e,r,t,n)=>{let s=e.avail_in;return s>n&&(s=n),s===0?0:(e.avail_in-=s,r.set(e.input.subarray(e.next_in,e.next_in+s),t),e.state.wrap===1?e.adler=br(e.adler,r,s,t):e.state.wrap===2&&(e.adler=H(e.adler,r,s,t)),e.next_in+=s,e.total_in+=s,s)},Ii=(e,r)=>{let t=e.max_chain_length,n=e.strstart,s,a,i=e.prev_length,o=e.nice_match,d=e.strstart>e.w_size-we?e.strstart-(e.w_size-we):0,l=e.window,u=e.w_mask,w=e.prev,m=e.strstart+Ie,f=l[n+i-1],g=l[n+i];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(s=r,!(l[s+i]!==g||l[s+i-1]!==f||l[s]!==l[n]||l[++s]!==l[n+1])){n+=2,s++;do;while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<m);if(a=Ie-(m-n),n=m-Ie,a>i){if(e.match_start=r,i=a,a>=o)break;f=l[n+i-1],g=l[n+i]}}while((r=w[r&u])>d&&--t!==0);return i<=e.lookahead?i:e.lookahead},Pt=e=>{let r=e.w_size,t,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-we)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),mc(e),n+=r),e.strm.avail_in===0)break;if(t=As(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=M)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Ce(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Ce(e,e.ins_h,e.window[s+M-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<M)););}while(e.lookahead<we&&e.strm.avail_in!==0)},Ui=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,s,a,i=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,s=e.strstart-e.block_start,n>s+e.strm.avail_in&&(n=s+e.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&r!==ie||r===Ne||n!==s+e.strm.avail_in)))break;i=r===ie&&n===s+e.strm.avail_in?1:0,xs(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Q(e.strm),s&&(s>n&&(s=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,n-=s),n&&(As(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(i===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?Ut:r!==Ne&&r!==ie&&e.strm.avail_in===0&&e.strstart===e.block_start?It:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(As(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,s=e.strstart-e.block_start,(s>=t||(s||r===ie)&&r!==Ne&&e.strm.avail_in===0&&s<=a)&&(n=s>a?a:s,i=r===ie&&e.strm.avail_in===0&&n===s?1:0,xs(e,e.block_start,n,i),e.block_start+=n,Q(e.strm)),i?ot:G)},ds=(e,r)=>{let t,n;for(;;){if(e.lookahead<we){if(Pt(e),e.lookahead<we&&r===Ne)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-we&&(e.match_length=Ii(e,t)),e.match_length>=M)if(n=Ue(e,e.strstart-e.match_start,e.match_length-M),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do e.strstart++,e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+1]);else n=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=e.strstart<M-1?e.strstart:M-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:Ut):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:It},Tt=(e,r)=>{let t,n,s;for(;;){if(e.lookahead<we){if(Pt(e),e.lookahead<we&&r===Ne)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=M-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-we&&(e.match_length=Ii(e,t),e.match_length<=5&&(e.strategy===Ql||e.match_length===M&&e.strstart-e.match_start>4096)&&(e.match_length=M-1)),e.prev_length>=M&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-M,n=Ue(e,e.strstart-1-e.prev_match,e.prev_length-M),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=Ce(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=M-1,e.strstart++,n&&(ee(e,!1),e.strm.avail_out===0))return G}else if(e.match_available){if(n=Ue(e,0,e.window[e.strstart-1]),n&&ee(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Ue(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<M-1?e.strstart:M-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:Ut):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:It},_c=(e,r)=>{let t,n,s,a,i=e.window;for(;;){if(e.lookahead<=Ie){if(Pt(e),e.lookahead<=Ie&&r===Ne)return G;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=M&&e.strstart>0&&(s=e.strstart-1,n=i[s],n===i[++s]&&n===i[++s]&&n===i[++s])){a=e.strstart+Ie;do;while(n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&s<a);e.match_length=Ie-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=M?(t=Ue(e,1,e.match_length-M),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:Ut):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:It},yc=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Pt(e),e.lookahead===0)){if(r===Ne)return G;break}if(e.match_length=0,t=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:Ut):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:It};function ge(e,r,t,n,s){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=s}var fr=[new ge(0,0,0,0,Ui),new ge(4,4,8,4,ds),new ge(4,5,16,8,ds),new ge(4,6,32,32,ds),new ge(4,4,16,16,Tt),new ge(8,16,32,32,Tt),new ge(8,16,128,128,Tt),new ge(8,32,128,256,Tt),new ge(32,128,258,1024,Tt),new ge(32,258,258,4096,Tt)],wc=e=>{e.window_size=2*e.w_size,Me(e.head),e.max_lazy_match=fr[e.level].max_lazy,e.good_match=fr[e.level].good_length,e.nice_match=fr[e.level].nice_length,e.max_chain_length=fr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0};function bc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=vn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(dc*2),this.dyn_dtree=new Uint16Array((2*cc+1)*2),this.bl_tree=new Uint16Array((2*uc+1)*2),Me(this.dyn_ltree),Me(this.dyn_dtree),Me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(fc+1),this.heap=new Uint16Array(2*Es+1),Me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Es+1),Me(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Sr=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.status!==Dt&&r.status!==Is&&r.status!==vs&&r.status!==Ss&&r.status!==Ts&&r.status!==ks&&r.status!==st&&r.status!==dr?1:0},Ni=e=>{if(Sr(e))return at(e,ye);e.total_in=e.total_out=0,e.data_type=nc;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?Is:r.wrap?Dt:st,e.adler=r.wrap===2?0:1,r.last_flush=-2,Zl(r),J},Ci=e=>{let r=Ni(e);return r===J&&wc(e.state),r},Rc=(e,r)=>Sr(e)||e.state.wrap!==2?ye:(e.state.gzhead=r,J),Fi=(e,r,t,n,s,a)=>{if(!e)return ye;let i=1;if(r===Yl&&(r=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),s<1||s>sc||t!==vn||n<8||n>15||r<0||r>9||a<0||a>tc||n===8&&i!==1)return at(e,ye);n===8&&(n=9);let o=new bc;return e.state=o,o.strm=e,o.status=Dt,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+M-1)/M),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=r,o.strategy=a,o.method=t,Ci(e)},xc=(e,r)=>Fi(e,r,vn,ac,ic,rc),Ec=(e,r)=>{if(Sr(e)||r>La||r<0)return e?at(e,ye):ye;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===dr&&r!==ie)return at(e,e.avail_out===0?us:ye);let n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Q(e),e.avail_out===0)return t.last_flush=-1,J}else if(e.avail_in===0&&za(r)<=za(n)&&r!==ie)return at(e,us);if(t.status===dr&&e.avail_in!==0)return at(e,us);if(t.status===Dt&&t.wrap===0&&(t.status=st),t.status===Dt){let s=vn+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=mn||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,s|=a<<6,t.strstart!==0&&(s|=hc),s+=31-s%31,ur(t,s),t.strstart!==0&&(ur(t,e.adler>>>16),ur(t,e.adler&65535)),e.adler=1,t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===Is){if(e.adler=0,N(t,31),N(t,139),N(t,8),t.gzhead)N(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),N(t,t.gzhead.time&255),N(t,t.gzhead.time>>8&255),N(t,t.gzhead.time>>16&255),N(t,t.gzhead.time>>24&255),N(t,t.level===9?2:t.strategy>=mn||t.level<2?4:0),N(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(N(t,t.gzhead.extra.length&255),N(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=H(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=vs;else if(N(t,0),N(t,0),N(t,0),N(t,0),N(t,0),N(t,t.level===9?2:t.strategy>=mn||t.level<2?4:0),N(t,pc),t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===vs){if(t.gzhead.extra){let s=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=o,Q(e),t.pending!==0)return t.last_flush=-1,J;s=0,a-=o}let i=new Uint8Array(t.gzhead.extra);t.pending_buf.set(i.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Ss}if(t.status===Ss){if(t.gzhead.name){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s)),Q(e),t.pending!==0)return t.last_flush=-1,J;s=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,N(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Ts}if(t.status===Ts){if(t.gzhead.comment){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s)),Q(e),t.pending!==0)return t.last_flush=-1,J;s=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,N(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=H(e.adler,t.pending_buf,t.pending-s,s))}t.status=ks}if(t.status===ks){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Q(e),t.pending!==0))return t.last_flush=-1,J;N(t,e.adler&255),N(t,e.adler>>8&255),e.adler=0}if(t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(e.avail_in!==0||t.lookahead!==0||r!==Ne&&t.status!==dr){let s=t.level===0?Ui(t,r):t.strategy===mn?yc(t,r):t.strategy===ec?_c(t,r):fr[t.level].func(t,r);if((s===ot||s===Ut)&&(t.status=dr),s===G||s===ot)return e.avail_out===0&&(t.last_flush=-1),J;if(s===It&&(r===Xl?Jl(t):r!==La&&(xs(t,0,0,!1),r===Gl&&(Me(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Q(e),e.avail_out===0))return t.last_flush=-1,J}return r!==ie?J:t.wrap<=0?Ba:(t.wrap===2?(N(t,e.adler&255),N(t,e.adler>>8&255),N(t,e.adler>>16&255),N(t,e.adler>>24&255),N(t,e.total_in&255),N(t,e.total_in>>8&255),N(t,e.total_in>>16&255),N(t,e.total_in>>24&255)):(ur(t,e.adler>>>16),ur(t,e.adler&65535)),Q(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?J:Ba)},vc=e=>{if(Sr(e))return ye;let r=e.state.status;return e.state=null,r===st?at(e,Kl):J},Sc=(e,r)=>{let t=r.length;if(Sr(e))return ye;let n=e.state,s=n.wrap;if(s===2||s===1&&n.status!==Dt||n.lookahead)return ye;if(s===1&&(e.adler=br(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){s===0&&(Me(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(r.subarray(t-n.w_size,t),0),r=d,t=n.w_size}let a=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Pt(n);n.lookahead>=M;){let d=n.strstart,l=n.lookahead-(M-1);do n.ins_h=Ce(n,n.ins_h,n.window[d+M-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=M-1,Pt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=M-1,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=a,n.wrap=s,J},Tc=xc,kc=Fi,Ac=Ci,Dc=Ni,Pc=Rc,Oc=Ec,Mc=vc,Ic=Sc,Uc="pako deflate (from Nodeca project)",pr={deflateInit:Tc,deflateInit2:kc,deflateReset:Ac,deflateResetKeep:Dc,deflateSetHeader:Pc,deflate:Oc,deflateEnd:Mc,deflateSetDictionary:Ic,deflateInfo:Uc},Nc=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),Cc=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)Nc(t,n)&&(e[n]=t[n])}}return e},Fc=e=>{let r=0;for(let n=0,s=e.length;n<s;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,s=0,a=e.length;n<a;n++){let i=e[n];t.set(i,s),s+=i.length}return t},Sn={assign:Cc,flattenChunks:Fc},Wi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wi=!1}var Rr=new Uint8Array(256);for(let e=0;e<256;e++)Rr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Rr[254]=Rr[254]=1;var Wc=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,s,a,i=e.length,o=0;for(s=0;s<i;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(o),a=0,s=0;a<o;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?r[a++]=t:t<2048?(r[a++]=192|t>>>6,r[a++]=128|t&63):t<65536?(r[a++]=224|t>>>12,r[a++]=128|t>>>6&63,r[a++]=128|t&63):(r[a++]=240|t>>>18,r[a++]=128|t>>>12&63,r[a++]=128|t>>>6&63,r[a++]=128|t&63);return r},Lc=(e,r)=>{if(r<65534&&e.subarray&&Wi)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},Bc=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,s,a=new Array(t*2);for(s=0,n=0;n<t;){let i=e[n++];if(i<128){a[s++]=i;continue}let o=Rr[i];if(o>4){a[s++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<t;)i=i<<6|e[n++]&63,o--;if(o>1){a[s++]=65533;continue}i<65536?a[s++]=i:(i-=65536,a[s++]=55296|i>>10&1023,a[s++]=56320|i&1023)}return Lc(a,s)},zc=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Rr[e[t]]>r?t:r},xr={string2buf:Wc,buf2string:Bc,utf8border:zc};function jc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Li=jc,Bi=Object.prototype.toString,{Z_NO_FLUSH:qc,Z_SYNC_FLUSH:Hc,Z_FULL_FLUSH:$c,Z_FINISH:Zc,Z_OK:xn,Z_STREAM_END:Vc,Z_DEFAULT_COMPRESSION:Jc,Z_DEFAULT_STRATEGY:Xc,Z_DEFLATED:Gc}=Mt;function Tr(e){this.options=Sn.assign({level:Jc,method:Gc,chunkSize:16384,windowBits:15,memLevel:8,strategy:Xc},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Li,this.strm.avail_out=0;let t=pr.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==xn)throw new Error(it[t]);if(r.header&&pr.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=xr.string2buf(r.dictionary):Bi.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=pr.deflateSetDictionary(this.strm,n),t!==xn)throw new Error(it[t]);this._dict_set=!0}}Tr.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s,a;if(this.ended)return!1;for(r===~~r?a=r:a=r===!0?Zc:qc,typeof e=="string"?t.input=xr.string2buf(e):Bi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===Hc||a===$c)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=pr.deflate(t,a),s===Vc)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=pr.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===xn;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Tr.prototype.onData=function(e){this.chunks.push(e)};Tr.prototype.onEnd=function(e){e===xn&&(this.result=Sn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Us(e,r){let t=new Tr(r);if(t.push(e,!0),t.err)throw t.msg||it[t.err];return t.result}function Kc(e,r){return r=r||{},r.raw=!0,Us(e,r)}function Yc(e,r){return r=r||{},r.gzip=!0,Us(e,r)}var Qc=Tr,eu=Us,tu=Kc,ru=Yc,nu=Mt,su={Deflate:Qc,deflate:eu,deflateRaw:tu,gzip:ru,constants:nu},gn=16209,au=16191,iu=function(r,t){let n,s,a,i,o,d,l,u,w,m,f,g,S,R,b,T,p,h,k,C,y,U,P,v,D=r.state;n=r.next_in,P=r.input,s=n+(r.avail_in-5),a=r.next_out,v=r.output,i=a-(t-r.avail_out),o=a+(r.avail_out-257),d=D.dmax,l=D.wsize,u=D.whave,w=D.wnext,m=D.window,f=D.hold,g=D.bits,S=D.lencode,R=D.distcode,b=(1<<D.lenbits)-1,T=(1<<D.distbits)-1;e:do{g<15&&(f+=P[n++]<<g,g+=8,f+=P[n++]<<g,g+=8),p=S[f&b];t:for(;;){if(h=p>>>24,f>>>=h,g-=h,h=p>>>16&255,h===0)v[a++]=p&65535;else if(h&16){k=p&65535,h&=15,h&&(g<h&&(f+=P[n++]<<g,g+=8),k+=f&(1<<h)-1,f>>>=h,g-=h),g<15&&(f+=P[n++]<<g,g+=8,f+=P[n++]<<g,g+=8),p=R[f&T];r:for(;;){if(h=p>>>24,f>>>=h,g-=h,h=p>>>16&255,h&16){if(C=p&65535,h&=15,g<h&&(f+=P[n++]<<g,g+=8,g<h&&(f+=P[n++]<<g,g+=8)),C+=f&(1<<h)-1,C>d){r.msg="invalid distance too far back",D.mode=gn;break e}if(f>>>=h,g-=h,h=a-i,C>h){if(h=C-h,h>u&&D.sane){r.msg="invalid distance too far back",D.mode=gn;break e}if(y=0,U=m,w===0){if(y+=l-h,h<k){k-=h;do v[a++]=m[y++];while(--h);y=a-C,U=v}}else if(w<h){if(y+=l+w-h,h-=w,h<k){k-=h;do v[a++]=m[y++];while(--h);if(y=0,w<k){h=w,k-=h;do v[a++]=m[y++];while(--h);y=a-C,U=v}}}else if(y+=w-h,h<k){k-=h;do v[a++]=m[y++];while(--h);y=a-C,U=v}for(;k>2;)v[a++]=U[y++],v[a++]=U[y++],v[a++]=U[y++],k-=3;k&&(v[a++]=U[y++],k>1&&(v[a++]=U[y++]))}else{y=a-C;do v[a++]=v[y++],v[a++]=v[y++],v[a++]=v[y++],k-=3;while(k>2);k&&(v[a++]=v[y++],k>1&&(v[a++]=v[y++]))}}else if((h&64)===0){p=R[(p&65535)+(f&(1<<h)-1)];continue r}else{r.msg="invalid distance code",D.mode=gn;break e}break}}else if((h&64)===0){p=S[(p&65535)+(f&(1<<h)-1)];continue t}else if(h&32){D.mode=au;break e}else{r.msg="invalid literal/length code",D.mode=gn;break e}break}}while(n<s&&a<o);k=g>>3,n-=k,g-=k<<3,f&=(1<<g)-1,r.next_in=n,r.next_out=a,r.avail_in=n<s?5+(s-n):5-(n-s),r.avail_out=a<o?257+(o-a):257-(a-o),D.hold=f,D.bits=g},kt=15,ja=852,qa=592,Ha=0,fs=1,$a=2,ou=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cu=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),uu=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),du=(e,r,t,n,s,a,i,o)=>{let d=o.bits,l=0,u=0,w=0,m=0,f=0,g=0,S=0,R=0,b=0,T=0,p,h,k,C,y,U=null,P,v=new Uint16Array(kt+1),D=new Uint16Array(kt+1),$=null,Ft,Fe,We;for(l=0;l<=kt;l++)v[l]=0;for(u=0;u<n;u++)v[r[t+u]]++;for(f=d,m=kt;m>=1&&v[m]===0;m--);if(f>m&&(f=m),m===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,o.bits=1,0;for(w=1;w<m&&v[w]===0;w++);for(f<w&&(f=w),R=1,l=1;l<=kt;l++)if(R<<=1,R-=v[l],R<0)return-1;if(R>0&&(e===Ha||m!==1))return-1;for(D[1]=0,l=1;l<kt;l++)D[l+1]=D[l]+v[l];for(u=0;u<n;u++)r[t+u]!==0&&(i[D[r[t+u]]++]=u);if(e===Ha?(U=$=i,P=20):e===fs?(U=ou,$=lu,P=257):(U=cu,$=uu,P=0),T=0,u=0,l=w,y=a,g=f,S=0,k=-1,b=1<<f,C=b-1,e===fs&&b>ja||e===$a&&b>qa)return 1;for(;;){Ft=l-S,i[u]+1<P?(Fe=0,We=i[u]):i[u]>=P?(Fe=$[i[u]-P],We=U[i[u]-P]):(Fe=96,We=0),p=1<<l-S,h=1<<g,w=h;do h-=p,s[y+(T>>S)+h]=Ft<<24|Fe<<16|We|0;while(h!==0);for(p=1<<l-1;T&p;)p>>=1;if(p!==0?(T&=p-1,T+=p):T=0,u++,--v[l]===0){if(l===m)break;l=r[t+i[u]]}if(l>f&&(T&C)!==k){for(S===0&&(S=f),y+=w,g=l-S,R=1<<g;g+S<m&&(R-=v[g+S],!(R<=0));)g++,R<<=1;if(b+=1<<g,e===fs&&b>ja||e===$a&&b>qa)return 1;k=T&C,s[k]=f<<24|g<<16|y-a|0}}return T!==0&&(s[y+T]=l-S<<24|64<<16|0),o.bits=f,0},mr=du,fu=0,zi=1,ji=2,{Z_FINISH:Za,Z_BLOCK:hu,Z_TREES:_n,Z_OK:lt,Z_STREAM_END:pu,Z_NEED_DICT:mu,Z_STREAM_ERROR:oe,Z_DATA_ERROR:qi,Z_MEM_ERROR:Hi,Z_BUF_ERROR:gu,Z_DEFLATED:Va}=Mt,Tn=16180,Ja=16181,Xa=16182,Ga=16183,Ka=16184,Ya=16185,Qa=16186,ei=16187,ti=16188,ri=16189,En=16190,Ee=16191,hs=16192,ni=16193,ps=16194,si=16195,ai=16196,ii=16197,oi=16198,yn=16199,wn=16200,li=16201,ci=16202,ui=16203,di=16204,fi=16205,ms=16206,hi=16207,pi=16208,B=16209,$i=16210,Zi=16211,_u=852,yu=592,wu=15,bu=wu,mi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Ru(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ct=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.mode<Tn||r.mode>Zi?1:0},Vi=e=>{if(ct(e))return oe;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Tn,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(_u),r.distcode=r.distdyn=new Int32Array(yu),r.sane=1,r.back=-1,lt},Ji=e=>{if(ct(e))return oe;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,Vi(e)},Xi=(e,r)=>{let t;if(ct(e))return oe;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?oe:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,Ji(e))},Gi=(e,r)=>{if(!e)return oe;let t=new Ru;e.state=t,t.strm=e,t.window=null,t.mode=Tn;let n=Xi(e,r);return n!==lt&&(e.state=null),n},xu=e=>Gi(e,bu),gi=!0,gs,_s,Eu=e=>{if(gi){gs=new Int32Array(512),_s=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(mr(zi,e.lens,0,288,gs,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;mr(ji,e.lens,0,32,_s,0,e.work,{bits:5}),gi=!1}e.lencode=gs,e.lenbits=9,e.distcode=_s,e.distbits=5},Ki=(e,r,t,n)=>{let s,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(r.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(r.subarray(t-n,t-n+s),a.wnext),n-=s,n?(a.window.set(r.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},vu=(e,r)=>{let t,n,s,a,i,o,d,l,u,w,m,f,g,S,R=0,b,T,p,h,k,C,y,U,P=new Uint8Array(4),v,D,$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ct(e)||!e.output||!e.input&&e.avail_in!==0)return oe;t=e.state,t.mode===Ee&&(t.mode=hs),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,w=o,m=d,U=lt;e:for(;;)switch(t.mode){case Tn:if(t.wrap===0){t.mode=hs;break}for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0),l=0,u=0,t.mode=Ja;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=B;break}if((l&15)!==Va){e.msg="unknown compression method",t.mode=B;break}if(l>>>=4,u-=4,y=(l&15)+8,t.wbits===0&&(t.wbits=y),y>15||y>t.wbits){e.msg="invalid window size",t.mode=B;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?ri:Ee,l=0,u=0;break;case Ja:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==Va){e.msg="unknown compression method",t.mode=B;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=B;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0,t.mode=Xa;case Xa:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,P[2]=l>>>16&255,P[3]=l>>>24&255,t.check=H(t.check,P,4,0)),l=0,u=0,t.mode=Ga;case Ga:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0,t.mode=Ka;case Ka:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=Ya;case Ya:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+f),y)),t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,a)),o-=f,a+=f,t.length-=f),t.length))break e;t.length=0,t.mode=Qa;case Qa:if(t.flags&2048){if(o===0)break e;f=0;do y=n[a+f++],t.head&&y&&t.length<65536&&(t.head.name+=String.fromCharCode(y));while(y&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,a)),o-=f,a+=f,y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ei;case ei:if(t.flags&4096){if(o===0)break e;f=0;do y=n[a+f++],t.head&&y&&t.length<65536&&(t.head.comment+=String.fromCharCode(y));while(y&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,a)),o-=f,a+=f,y)break e}else t.head&&(t.head.comment=null);t.mode=ti;case ti:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=B;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Ee;break;case ri:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}e.adler=t.check=mi(l),l=0,u=0,t.mode=En;case En:if(t.havedict===0)return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,mu;e.adler=t.check=1,t.mode=Ee;case Ee:if(r===hu||r===_n)break e;case hs:if(t.last){l>>>=u&7,u-=u&7,t.mode=ms;break}for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=ni;break;case 1:if(Eu(t),t.mode=yn,r===_n){l>>>=2,u-=2;break e}break;case 2:t.mode=ai;break;case 3:e.msg="invalid block type",t.mode=B}l>>>=2,u-=2;break;case ni:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=B;break}if(t.length=l&65535,l=0,u=0,t.mode=ps,r===_n)break e;case ps:t.mode=si;case si:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;s.set(n.subarray(a,a+f),i),o-=f,a+=f,d-=f,i+=f,t.length-=f;break}t.mode=Ee;break;case ai:for(;u<14;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=B;break}t.have=0,t.mode=ii;case ii:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.lens[$[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,v={bits:t.lenbits},U=mr(fu,t.lens,0,19,t.lencode,0,t.work,v),t.lenbits=v.bits,U){e.msg="invalid code lengths set",t.mode=B;break}t.have=0,t.mode=oi;case oi:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[l&(1<<t.lenbits)-1],b=R>>>24,T=R>>>16&255,p=R&65535,!(b<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(p<16)l>>>=b,u-=b,t.lens[t.have++]=p;else{if(p===16){for(D=b+2;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(l>>>=b,u-=b,t.have===0){e.msg="invalid bit length repeat",t.mode=B;break}y=t.lens[t.have-1],f=3+(l&3),l>>>=2,u-=2}else if(p===17){for(D=b+3;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=b,u-=b,y=0,f=3+(l&7),l>>>=3,u-=3}else{for(D=b+7;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=b,u-=b,y=0,f=11+(l&127),l>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=B;break}for(;f--;)t.lens[t.have++]=y}}if(t.mode===B)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=B;break}if(t.lenbits=9,v={bits:t.lenbits},U=mr(zi,t.lens,0,t.nlen,t.lencode,0,t.work,v),t.lenbits=v.bits,U){e.msg="invalid literal/lengths set",t.mode=B;break}if(t.distbits=6,t.distcode=t.distdyn,v={bits:t.distbits},U=mr(ji,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,v),t.distbits=v.bits,U){e.msg="invalid distances set",t.mode=B;break}if(t.mode=yn,r===_n)break e;case yn:t.mode=wn;case wn:if(o>=6&&d>=258){e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,iu(e,m),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,t.mode===Ee&&(t.back=-1);break}for(t.back=0;R=t.lencode[l&(1<<t.lenbits)-1],b=R>>>24,T=R>>>16&255,p=R&65535,!(b<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(T&&(T&240)===0){for(h=b,k=T,C=p;R=t.lencode[C+((l&(1<<h+k)-1)>>h)],b=R>>>24,T=R>>>16&255,p=R&65535,!(h+b<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=b,u-=b,t.back+=b,t.length=p,T===0){t.mode=fi;break}if(T&32){t.back=-1,t.mode=Ee;break}if(T&64){e.msg="invalid literal/length code",t.mode=B;break}t.extra=T&15,t.mode=li;case li:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ci;case ci:for(;R=t.distcode[l&(1<<t.distbits)-1],b=R>>>24,T=R>>>16&255,p=R&65535,!(b<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((T&240)===0){for(h=b,k=T,C=p;R=t.distcode[C+((l&(1<<h+k)-1)>>h)],b=R>>>24,T=R>>>16&255,p=R&65535,!(h+b<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=b,u-=b,t.back+=b,T&64){e.msg="invalid distance code",t.mode=B;break}t.offset=p,t.extra=T&15,t.mode=ui;case ui:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=B;break}t.mode=di;case di:if(d===0)break e;if(f=m-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=B;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),S=t.window}else S=s,g=i-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do s[i++]=S[g++];while(--f);t.length===0&&(t.mode=wn);break;case fi:if(d===0)break e;s[i++]=t.length,d--,t.mode=wn;break;case ms:if(t.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[a++]<<u,u+=8}if(m-=d,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?H(t.check,s,m,i-m):br(t.check,s,m,i-m)),m=d,t.wrap&4&&(t.flags?l:mi(l))!==t.check){e.msg="incorrect data check",t.mode=B;break}l=0,u=0}t.mode=hi;case hi:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=B;break}l=0,u=0}t.mode=pi;case pi:U=pu;break e;case B:U=qi;break e;case $i:return Hi;case Zi:default:return oe}return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,(t.wsize||m!==e.avail_out&&t.mode<B&&(t.mode<ms||r!==Za))&&Ki(e,e.output,e.next_out,m-e.avail_out),w-=e.avail_in,m-=e.avail_out,e.total_in+=w,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?H(t.check,s,m,e.next_out-m):br(t.check,s,m,e.next_out-m)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Ee?128:0)+(t.mode===yn||t.mode===ps?256:0),(w===0&&m===0||r===Za)&&U===lt&&(U=gu),U},Su=e=>{if(ct(e))return oe;let r=e.state;return r.window&&(r.window=null),e.state=null,lt},Tu=(e,r)=>{if(ct(e))return oe;let t=e.state;return(t.wrap&2)===0?oe:(t.head=r,r.done=!1,lt)},ku=(e,r)=>{let t=r.length,n,s,a;return ct(e)||(n=e.state,n.wrap!==0&&n.mode!==En)?oe:n.mode===En&&(s=1,s=br(s,r,t,0),s!==n.check)?qi:(a=Ki(e,r,t,t),a?(n.mode=$i,Hi):(n.havedict=1,lt))},Au=Ji,Du=Xi,Pu=Vi,Ou=xu,Mu=Gi,Iu=vu,Uu=Su,Nu=Tu,Cu=ku,Fu="pako inflate (from Nodeca project)",Se={inflateReset:Au,inflateReset2:Du,inflateResetKeep:Pu,inflateInit:Ou,inflateInit2:Mu,inflate:Iu,inflateEnd:Uu,inflateGetHeader:Nu,inflateSetDictionary:Cu,inflateInfo:Fu};function Wu(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Lu=Wu,Yi=Object.prototype.toString,{Z_NO_FLUSH:Bu,Z_FINISH:zu,Z_OK:Er,Z_STREAM_END:ys,Z_NEED_DICT:ws,Z_STREAM_ERROR:ju,Z_DATA_ERROR:_i,Z_MEM_ERROR:qu}=Mt;function kr(e){this.options=Sn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Li,this.strm.avail_out=0;let t=Se.inflateInit2(this.strm,r.windowBits);if(t!==Er)throw new Error(it[t]);if(this.header=new Lu,Se.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=xr.string2buf(r.dictionary):Yi.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=Se.inflateSetDictionary(this.strm,r.dictionary),t!==Er)))throw new Error(it[t])}kr.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,a,i,o;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?zu:Bu,Yi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=Se.inflate(t,i),a===ws&&s&&(a=Se.inflateSetDictionary(t,s),a===Er?a=Se.inflate(t,i):a===_i&&(a=ws));t.avail_in>0&&a===ys&&t.state.wrap>0&&e[t.next_in]!==0;)Se.inflateReset(t),a=Se.inflate(t,i);switch(a){case ju:case _i:case ws:case qu:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===ys))if(this.options.to==="string"){let d=xr.utf8border(t.output,t.next_out),l=t.next_out-d,u=xr.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Er&&o===0)){if(a===ys)return a=Se.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};kr.prototype.onData=function(e){this.chunks.push(e)};kr.prototype.onEnd=function(e){e===Er&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Sn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ns(e,r){let t=new kr(r);if(t.push(e),t.err)throw t.msg||it[t.err];return t.result}function Hu(e,r){return r=r||{},r.raw=!0,Ns(e,r)}var $u=kr,Zu=Ns,Vu=Hu,Ju=Ns,Xu=Mt,Gu={Inflate:$u,inflate:Zu,inflateRaw:Vu,ungzip:Ju,constants:Xu},{Deflate:Xh,deflate:Gh,deflateRaw:Kh,gzip:Yh}=su,{Inflate:Qh,inflate:ep,inflateRaw:tp,ungzip:Ku}=Gu;var kn=Ku;function Qi(e){return"node"in e}var td=":";var rd=new TextEncoder,nd=new TextDecoder("utf-8"),eo={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},Cs=class{constructor(r){this.fs=r}open(r){let t=this.fs.realPath(r.node);this.fs.FS.isFile(r.node.mode)&&(r.file=this.fs.API.get(t))}close(r){if(!this.fs.FS.isFile(r.node.mode)||!r.file)return;let t=this.fs.realPath(r.node),n=r.flags,s=typeof n=="string"?parseInt(n,10):n;s&=8191;let a=!0;s in eo&&(a=eo[s]),a&&this.fs.API.put(t,r.file),r.file=void 0}read(r,t,n,s,a){if(s<=0||r.file===void 0||a>=(r.file.data.length||0))return 0;let i=Math.min(r.file.data.length-a,s);return t.set(r.file.data.subarray(a,a+i),n),i}write(r,t,n,s,a){var i;if(s<=0||r.file===void 0)return 0;if(r.node.timestamp=Date.now(),a+s>(((i=r.file)===null||i===void 0?void 0:i.data.length)||0)){let o=r.file.data?r.file.data:new Uint8Array;r.file.data=new Uint8Array(a+s),r.file.data.set(o)}return r.file.data.set(t.subarray(n,n+s),a),s}llseek(r,t,n){let s=t;if(n===1)s+=r.position;else if(n===2&&this.fs.FS.isFile(r.node.mode))if(r.file!==void 0)s+=r.file.data.length;else throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);if(s<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return s}},Fs=class{constructor(r){this.fs=r}node(r){return Qi(r)?r.node:r}getattr(r){let t=this.node(r);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}}setattr(r,t){let n=this.node(r);for(let[s,a]of Object.entries(t))switch(s){case"mode":n.mode=a;break;case"timestamp":n.timestamp=a;break;case"size":{let i=a,o=this.fs.realPath(n);if(this.fs.FS.isFile(n.mode)&&i>=0){let d=this.fs.API.get(o),l=d.data?d.data:new Uint8Array;i!==l.length&&(i<l.length?d.data=d.data.slice(0,i):(d.data=new Uint8Array(i),d.data.set(l)),this.fs.API.put(o,d))}else console.warn("setattr size of",i,"on",n,"not yet implemented");break}default:console.warn("setattr",s,"of",a,"on",n,"not yet implemented");break}}lookup(r,t){let n=this.node(r),s=this.fs.PATH.join2(this.fs.realPath(n),t),a=this.fs.API.lookup(s);if(!a.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(n,t,a.mode,0)}mknod(r,t,n,s){let a=this.node(r),i=this.fs.PATH.join2(this.fs.realPath(a),t);return this.fs.API.mknod(i,n),this.fs.createNode(a,t,n,s)}rename(r,t,n){let s=this.node(r),a=this.node(t);this.fs.API.rename(s.parent?this.fs.PATH.join2(this.fs.realPath(s.parent),s.name):s.name,this.fs.PATH.join2(this.fs.realPath(a),n)),s.name=n,s.parent=a}unlink(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}rmdir(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}readdir(r){return this.fs.API.readdir(this.fs.realPath(this.node(r)))}symlink(r,t,n){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}readlink(r){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}},Ws=class{constructor(r){this._driveName=r.driveName,this._mountpoint=r.mountpoint,this.FS=r.FS,this.ERRNO_CODES=r.ERRNO_CODES}lookup(r){return this.request({method:"lookup",path:this.normalizePath(r)})}getmode(r){return this.request({method:"getmode",path:this.normalizePath(r)})}mknod(r,t){return this.request({method:"mknod",path:this.normalizePath(r),data:{mode:t}})}rename(r,t){return this.request({method:"rename",path:this.normalizePath(r),data:{newPath:this.normalizePath(t)}})}readdir(r){let t=this.request({method:"readdir",path:this.normalizePath(r)});return t.push("."),t.push(".."),t}rmdir(r){return this.request({method:"rmdir",path:this.normalizePath(r)})}get(r){let t=this.request({method:"get",path:this.normalizePath(r)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let n=t.content,s=t.format;switch(s){case"json":case"text":return{data:rd.encode(n),format:s};case"base64":{let a=atob(n),i=a.length,o=new Uint8Array(i);for(let d=0;d<i;d++)o[d]=a.charCodeAt(d);return{data:o,format:s}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(r,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:nd.decode(t.data)}});case"base64":{let n="";for(let s=0;s<t.data.byteLength;s++)n+=String.fromCharCode(t.data[s]);return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:btoa(n)}})}}}getattr(r){let t=this.request({method:"getattr",path:this.normalizePath(r)});return t.atime&&(t.atime=new Date(t.atime)),t.mtime&&(t.mtime=new Date(t.mtime)),t.ctime&&(t.ctime=new Date(t.ctime)),t.size=t.size||0,t}normalizePath(r){return r.startsWith(this._mountpoint)&&(r=r.slice(this._mountpoint.length)),this._driveName&&(r=`${this._driveName}${td}${r}`),r}},Ls=class extends Ws{constructor(r){super(r),this._baseUrl=r.baseUrl,this._browsingContextId=r.browsingContextId||""}request(r){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let n={data:r,browsingContextId:this._browsingContextId};try{t.send(JSON.stringify(n))}catch(s){console.error(s)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},An=class{constructor(r){this.FS=r.FS,this.PATH=r.PATH,this.ERRNO_CODES=r.ERRNO_CODES,this.API=this.createAPI(r),this.driveName=r.driveName,this.node_ops=new Fs(this),this.stream_ops=new Cs(this)}createAPI(r){if(!r.browsingContextId||!r.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new Ls(r)}mount(r){return this.createNode(null,r.mountpoint,16895,0)}createNode(r,t,n,s){let a=this.FS;if(!a.isDir(n)&&!a.isFile(n))throw new a.ErrnoError(this.ERRNO_CODES.EINVAL);let i=a.createNode(r,t,n,s);return i.node_ops=this.node_ops,i.stream_ops=this.stream_ops,i}getMode(r){return this.API.getmode(r)}realPath(r){let t=[],n=r;for(t.push(n.name);n.parent!==n;)n=n.parent,t.push(n.name);return t.reverse(),this.PATH.join.apply(null,t)}};function to(e,r,t){if(e!==c.FS.filesystems.WORKERFS)return c.FS._mount(e,r,t);if("packages"in r&&r.packages)r.packages.forEach(n=>{Ar(n.blob,n.metadata,t)});else throw new Error("Can't mount data. You must use the `packages` key when mounting with `WORKERFS` in webR.")}function Bs(e,r){let t=location.origin+"/",n=new An({FS:globalThis.FS,PATH:globalThis.PATH,ERRNO_CODES:globalThis.ERRNO_CODES,baseUrl:t,driveName:(r==null?void 0:r.driveName)||"",mountpoint:e,browsingContextId:(r==null?void 0:r.browsingContextId)||""});n.node_ops.readdir=n.node_ops.readdir.bind(n.node_ops),n.node_ops.getattr=n.node_ops.getattr.bind(n.node_ops),n.node_ops.setattr=n.node_ops.setattr.bind(n.node_ops),c.FS.mount(n,{},e)}function ro(e,r){if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let t=c.downloadFileContent(e);if(t.status<200||t.status>=300)throw new Error("Can't download Emscripten filesystem image.");let{data:n,metadata:s}=so(t.response);Ar(n,s,r)}else{let t=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),n=c.downloadFileContent(`${t}.js.metadata`);if(n.status<200||n.status>=300)throw new Error("Can't download Emscripten filesystem image metadata.");let s=JSON.parse(new TextDecoder().decode(n.response)),a=s.gzip?".data.gz":".data",i=c.downloadFileContent(`${t}${a}`);if(i.status<200||i.status>=300)throw new Error("Can't download Emscripten filesystem image data.");let o=i.response;s.gzip&&(o=kn(o).buffer),Ar(o,s,r)}}function no(e,r){let t=require("fs");if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let n=t.readFileSync(e),{data:s,metadata:a}=so(n);Ar(s,a,r)}else{let n=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),s=JSON.parse(t.readFileSync(`${n}.js.metadata`,"utf8")),a=s.gzip?".data.gz":".data",i=t.readFileSync(`${n}${a}`);s.gzip&&(i=kn(i).buffer),Ar(i,s,r)}}function Ar(e,r,t){if(j){let n=Buffer.from(e),s=c.FS.filesystems.WORKERFS;s.reader||(s.reader={readAsArrayBuffer:a=>new Uint8Array(a)}),r.files.forEach(a=>{let i=n.subarray(a.start,a.end);i.size=i.byteLength,i.slice=(w,m)=>{let f=i.subarray(w,m);return f.size=f.byteLength,f};let o=(t+a.filename).split("/"),d=o.pop();if(!d)throw new Error(`Invalid mount path "${t}${a.filename}".`);let l=o.join("/");c.FS.mkdirTree(l);let u=c.FS.lookupPath(l,{}).node;s.createNode(u,d,s.FILE_MODE,0,i)})}else c.FS._mount(c.FS.filesystems.WORKERFS,{packages:[{blob:new Blob([e]),metadata:r}]},t)}function so(e){let r=kn(e).buffer,t=sd(r)||ad(r);if(!t)throw new Error("Can't mount archive, no VFS metadata found.");let n=new DataView(r,512*t.block,t.len),s=JSON.parse(new TextDecoder().decode(n));return{data:r,metadata:s}}function sd(e){let r=new DataView(e),t=r.getInt32(r.byteLength-16),n=r.getInt32(r.byteLength-8),s=r.getInt32(r.byteLength-4);return t!==2003133010||n===0||s===0?null:{block:n,len:s}}function ad(e){let r=new TextDecoder,t=0;for(;t<e.byteLength;){let n=e.slice(t,t+512);if(t+=512,new Uint8Array(n).every(o=>o===0))return null;let s=r.decode(n.slice(156,157));if(/5|g|[A-Z]/.test(s))continue;let a=r.decode(n.slice(0,100)).replace(/\0+$/,""),i=parseInt(r.decode(n.slice(124,136)),8);if(a==".vfs-index.json")return{block:t/512,len:i};t+=512*Math.ceil(i/512)}return null}var lo=!1,co=!1,_;Object.assign(globalThis,{RCall:de,RCharacter:ce,RComplex:mt,RDataFrame:Ze,RDouble:Je,REnvironment:ne,RInteger:Ht,RList:fe,RLogical:se,RObject:x,RPairlist:$e,RRaw:gt,RString:Ve,RSymbol:q,destroy:In,getRWorkerClass:$t,initPersistentObjects:Nn,isRObject:Xe,keep:Ke,objs:L,purge:Un,shelters:Ae});var uo=function(e){if(!(!e||!e.type)){if(e.type==="init"){if(lo)throw new Error("Can't initialise worker multiple times.");let r=e;_=Ia(r),r.data.config.channelType=r.data.channelType,dd(r.data.config),lo=!0;return}_==null||_.onMessageFromMainThread(e)}};j?(require("worker_threads").parentPort.on("message",uo),globalThis.XMLHttpRequest=oo().XMLHttpRequest):globalThis.onmessage=e=>uo(e.data);var Y;function od(e){switch(e.type){case"request":{let r=e,t=r.data.msg,n=(s,a)=>_==null?void 0:_.write(on(r.data.uuid,s,a));try{switch(t.type){case"analyzePath":{let s=t,a=c.FS.analyzePath(s.data.path,s.data.dontResolveLastLink),i={isRoot:a.isRoot,exists:a.exists,error:a.error,name:a.name,path:a.path,parentExists:a.parentExists,parentPath:a.parentPath,object:a.exists?Ct(a.object):void 0,parentObject:a.parentExists?Ct(a.parentObject):void 0};n({obj:i,payloadType:"raw"});break}case"lookupPath":{let s=t,a=c.FS.lookupPath(s.data.path,{}).node;n({obj:Ct(a),payloadType:"raw"});break}case"mkdir":{let s=t;n({obj:Ct(c.FS.mkdir(s.data.path)),payloadType:"raw"});break}case"mount":{let s=t,a=s.data.type,i=s.data.mountpoint;if(a==="IDBFS"&&Y.channelType==Oe.SharedArrayBuffer)throw new Error("The `IDBFS` filesystem type is not supported under the `SharedArrayBuffer` communication channel. The `PostMessage` communication channel must be used.");if(a==="DRIVEFS"){let o=s.data.options;Bs(i,o)}else{let o=c.FS.filesystems[a];c.FS.mount(o,s.data.options,i)}n({obj:null,payloadType:"raw"});break}case"syncfs":{let s=t;c.FS.syncfs(s.data.populate,a=>{if(a)throw new Error(`Emscripten \`syncfs\` error: "${a}".`);n({obj:null,payloadType:"raw"})});break}case"readFile":{let a=t.data,i={obj:c.FS.readFile(a.path,{encoding:"binary",flags:a.flags}),payloadType:"raw"};n(i,[i.obj.buffer]);break}case"rename":{let s=t;n({obj:c.FS.rename(s.data.oldpath,s.data.newpath),payloadType:"raw"});break}case"rmdir":{let s=t;n({obj:c.FS.rmdir(s.data.path),payloadType:"raw"});break}case"writeFile":{let a=t.data,i=Uint8Array.from(Object.values(a.data));n({obj:c.FS.writeFile(a.path,i,{flags:a.flags}),payloadType:"raw"});break}case"unlink":{let s=t;n({obj:c.FS.unlink(s.data.path),payloadType:"raw"});break}case"unmount":{let s=t;n({obj:c.FS.unmount(s.data.path),payloadType:"raw"});break}case"newShelter":{let s=qt();Ae.set(s,[]),n({payloadType:"raw",obj:s});break}case"shelterSize":{let s=t,a=Ae.get(s.data).length;n({payloadType:"raw",obj:a});break}case"shelterPurge":{Un(t.data),n({payloadType:"raw",obj:null});break}case"shelterDestroy":{let s=t;In(s.data.id,s.data.obj.obj.ptr),n({payloadType:"raw",obj:null});break}case"captureR":{let a=t.data,i=a.shelter,o={n:0};try{let d=js(a.code,a.options);O(d.result,o),O(d.output,o);let l=d.result;Ke(i,l);let u=d.output.length,w=[];for(let f=1;f<u+1;++f){let g=d.output.get(f),S=g.pluck(1,1).toString(),R=g.get(2);if(S==="stdout"||S==="stderr"){let b=R.toString();w.push({type:S,data:b})}else{Ke(i,R);let b={obj:{ptr:R.ptr,type:R.type(),methods:x.getMethods(R)},payloadType:"ptr"};w.push({type:S,data:b})}}let m={payloadType:"ptr",obj:{ptr:l.ptr,type:l.type(),methods:x.getMethods(l)}};n({payloadType:"raw",obj:{result:m,output:w,images:d.images}})}finally{W(o.n)}break}case"evalR":{let s=t,a=Dr(s.data.code,s.data.options);Ke(s.data.shelter,a),n({obj:{type:a.type(),ptr:a.ptr,methods:x.getMethods(a)},payloadType:"ptr"});break}case"evalRRaw":{let s=t,a=Dr(s.data.code,s.data.options);je(a);let i=()=>{throw new Error(`Can't convert object of type ${a.type()} to ${s.data.outputType}.`)};try{let o;switch(s.data.outputType){case"void":break;case"boolean":switch(a.type()){case"logical":o=a.toBoolean();break;default:i()}break;case"boolean[]":switch(a.type()){case"logical":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"number":switch(a.type()){case"logical":o=a.toBoolean(),o=Number(o);break;case"integer":o=a.toNumber();break;case"double":o=a.toNumber();break;default:i()}break;case"number[]":switch(a.type()){case"logical":o=a.toArray(),o=o.map(d=>d===null?i():Number(d));break;case"integer":o=a.toArray(),o.some(d=>d===null)&&i();break;case"double":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"string":switch(a.type()){case"character":o=a.toString();break;default:i()}break;case"string[]":switch(a.type()){case"character":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;default:throw new Error("Unexpected output type in `evalRRaw().")}n({obj:o,payloadType:"raw"});break}finally{W(1)}}case"newRObject":{let s=t,a=cd(s.data.args,s.data.objType);Ke(s.data.shelter,a.obj.ptr),n(a);break}case"callRObjectMethod":{let a=t.data,i=a.payload?x.wrap(a.payload.obj.ptr):x,o=ud(i,a.prop,a.args);Qt(o)&&Ke(a.shelter,o.obj.ptr),n(o);break}case"invokeWasmFunction":{let s=t,a=c.getWasmTableEntry(s.data.ptr)(...s.data.args);n({payloadType:"raw",obj:a});break}case"installPackages":{let s=t,a=s.data.name,i=s.data.options.repos?s.data.options.repos:Y.repoUrl;typeof a=="string"&&(a=[a]),typeof i=="string"&&(i=[i]),Dr(`webr::install(
              c(${a.map(o=>'"'+o+'"').join(",")}),
              repos = c(${i.map(o=>'"'+o+'"').join(",")}),
              quiet = ${s.data.options.quiet?"TRUE":"FALSE"},
              mount = ${s.data.options.mount?"TRUE":"FALSE"}
            )`),n({obj:!0,payloadType:"raw"});break}default:throw new Error("Unknown event `"+t.type+"`")}}catch(s){let a=s,i={name:a.name,message:a.message,errno:a.errno,stack:a.stack};n({payloadType:"err",obj:i}),a instanceof dt&&(c._R_ContinueUnwind(a.cont),$r())}break}default:throw new Error("Unknown event `"+e.type+"`")}}function Ct(e){let r={id:e.id,name:e.name,mode:e.mode,isFolder:e.isFolder,mounted:null,contents:{}};return e.isFolder&&e.contents&&(r.contents=Object.fromEntries(Object.entries(e.contents).map(([t,n])=>[t,Ct(n)]))),e.mounted!==null&&(r.mounted={mountpoint:e.mounted.mountpoint,root:Ct(e.mounted.root)}),r}function ld(e,r=[]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.responseType="arraybuffer";try{r.forEach(n=>{let s=n.split(": ");t.setRequestHeader(s[0],s[1])})}catch{let n="An error occurred setting headers in XMLHttpRequest";return console.error(n),{status:400,response:n}}try{t.send(null);let n=j?JSON.parse(String(t.status)).data.statusCode:t.status;if(n>=200&&n<300)return{status:n,response:t.response};{let s=new TextDecoder().decode(t.response);return console.error(`Error fetching ${e} - ${s}`),{status:n,response:s}}}catch{return{status:400,response:"An error occurred in XMLHttpRequest"}}}function cd(e,r){let t=$t(r),n=Ye(e,Qt,a=>x.wrap(a.obj.ptr)),s=new t(...n);return{obj:{type:s.type(),ptr:s.ptr,methods:x.getMethods(s)},payloadType:"ptr"}}function ud(e,r,t){if(!(r in e))throw new ReferenceError(`${r} is not defined`);let n=e[r];if(typeof n!="function")throw Error("Requested property cannot be invoked");let s=n.apply(e,t.map(i=>i.payloadType==="ptr"?x.wrap(i.obj.ptr):Ye(i.obj,Qt,o=>x.wrap(o.obj.ptr))));return{obj:Ye(s,Xe,i=>({obj:{type:i.type(),ptr:i.ptr,methods:x.getMethods(i)},payloadType:"ptr"})),payloadType:"raw"}}function js(e,r={}){var a;let t=Object.assign({env:L.globalEnv,captureStreams:!0,captureConditions:!0,captureGraphics:typeof OffscreenCanvas<"u",withAutoprint:!1,throwJsException:!0,withHandlers:!0},Ye(r,Qt,i=>x.wrap(i.obj.ptr))),n={n:0},s=new ne({});O(s,n),c.setValue(c._R_Interactive,0,"i8");try{let i=new ne(t.env);if(O(i,n),i.type()!=="environment")throw new Error("Attempted to evaluate R code with invalid environment object");if(t.captureGraphics){if(typeof OffscreenCanvas>"u")throw new Error("This environment does not have support for OffscreenCanvas. Consider disabling plot capture using `captureGraphics: false`.");s.bind("canvas_options",new fe(Object.assign({capture:!0},t.captureGraphics))),be(`{
        old_dev <- dev.cur()
        do.call(webr::canvas, canvas_options)
        new_dev <- dev.cur()
        old_cache <- webr::canvas_cache()
        plots <- numeric()
      }`,s)}let o=L.true.ptr,d=L.false.ptr,l=be("webr::eval_r",L.baseEnv),u=be("quote",L.baseEnv);O(l,n),O(u,n);let w=new x(e);O(w,n);let m=c._Rf_lang6(l.ptr,c._Rf_lang2(u.ptr,w.ptr),t.captureConditions?o:d,t.captureStreams?o:d,t.withAutoprint?o:d,t.withHandlers?o:d);O(m,n);let f=fe.wrap(qe(m,i));if(O(f,n),t.captureConditions&&t.throwJsException){let R=f.get("output").toArray().find(b=>b.get("type").toString()==="error");if(R){let b=R.pluck("data","call"),T=b&&b.type()==="call"?`\`${b.deparse()}\``:"unknown source",p=((a=R.pluck("data","message"))==null?void 0:a.toString())||"An error occurred evaluating R code.";throw new Error(`Error in ${T}: ${p}`)}}let g=[];if(t.captureGraphics){let S=be(`{
        new_cache <- webr::canvas_cache()
        plots <- setdiff(new_cache, old_cache)
      }`,s);O(S,n),g=S.toArray().map(R=>c.webr.canvas[R].offscreen.transferToImageBitmap())}return{result:f.get("result"),output:f.get("output"),images:g}}finally{c.setValue(c._R_Interactive,Y.interactive?1:0,"i8");let i=s.get("new_dev");t.captureGraphics&&i.type()!=="null"&&be(`{
        dev.off(new_dev)
        dev.set(old_dev)
        webr::canvas_destroy(plots)
      }`,s),W(n.n)}}function Dr(e,r={}){var s,a;r=Object.assign({captureGraphics:!1},r);let t={n:0},n=js(e,r);try{O(n.output,t),O(n.result,t);for(let i=1;i<=n.output.length;i++){let o=n.output.get(i),d=o.get("type").toString();switch(d){case"stdout":_==null||_.writeSystem({type:"console.log",data:o.get("data").toString()});break;case"stderr":_==null||_.writeSystem({type:"console.warn",data:o.get("data").toString()});break;case"message":_==null||_.writeSystem({type:"console.warn",data:((s=o.pluck("data","message"))==null?void 0:s.toString())||""});break;case"warning":_==null||_.writeSystem({type:"console.warn",data:`Warning message: 
${((a=o.pluck("data","message"))==null?void 0:a.toString())||""}`});break;default:_==null||_.writeSystem({type:"console.warn",data:`Output of type ${d}:`}),_==null||_.writeSystem({type:"console.warn",data:o.get("data").toJs()});break}}return n.result}finally{W(t.n)}}function dd(e){Y=e;let r={...e.REnv};if(!r.TZ){let t=new Intl.DateTimeFormat;r.TZ=t.resolvedOptions().timeZone}c.preRun=[],c.arguments=Y.RArgs,c.noExitRuntime=!0,c.noImageDecoding=!0,c.noAudioDecoding=!0,c.noInitialRun=!0,c.noWasmDecoding=!0,c.preRun.push(()=>{j&&(globalThis.FS=c.FS,globalThis.chan=_),Y.createLazyFilesystem&&c.createLazyFilesystem(),c.FS.mkdirTree(Y.homedir),c.ENV.HOME=Y.homedir,c.FS.chdir(Y.homedir),c.ENV=Object.assign(c.ENV,r),c.FS._mount=c.FS.mount,c.FS.mount=to}),_==null||_.setDispatchHandler(od),c.onRuntimeInitialized=()=>{_==null||_.run(Y.RArgs)},c.webr={UnwindProtectException:dt,evalR:Dr,captureR:js,channel:_,canvas:{},resolveInit:()=>{Nn(),_==null||_.setInterrupt(c._Rf_onintr),c.setValue(c._R_Interactive,Y.interactive?1:0,"i8"),Dr(`options(webr_pkg_repos="${Y.repoUrl}")`),_==null||_.resolve(),co=!0},setPrompt:t=>{_==null||_.write({type:"prompt",data:t})},readConsole:()=>{if(!_)throw new Error("Can't read console input without a communication channel");return co||c.webr.resolveInit(),_.inputOrDispatch()},handleEvents:()=>{_==null||_.handleInterrupt()},dataViewer:(t,n)=>{let s=fe.wrap(t).toObject({depth:0});_==null||_.write({type:"view",data:{data:s,title:n}})},evalJs:t=>{try{let n=(0,eval)(c.UTF8ToString(t));return new x(n).ptr}catch(n){if(n instanceof dt)c._R_ContinueUnwind(n.cont),$r();else if(n===1/0)throw n;let s=c.allocateUTF8OnStack(`An error occurred during JavaScript evaluation:
  ${n.message}`);c._Rf_error(s)}return $r(),0},setTimeoutWasm:(t,n,...s)=>{_==null||_.writeSystem({type:"setTimeoutWasm",data:{ptr:t,delay:n,args:s}})}},c.locateFile=t=>Y.baseUrl+t,c.downloadFileContent=ld,c.mountImageUrl=ro,c.mountImagePath=no,c.mountDriveFS=Bs,c.print=t=>{_==null||_.write({type:"stdout",data:t})},c.printErr=t=>{_==null||_.write({type:"stderr",data:t})},globalThis.Module=c,setTimeout(()=>{let t=`${Y.baseUrl}R.js`;Bt(t)})}
/*! Bundled license information:

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=webr-worker.js.map
